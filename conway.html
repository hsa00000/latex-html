<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Note on Algebraic Number Theory</title>
    <!--
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    -->
    <script
    src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <!--
    <link rel="stylesheet" href="styles/bs3.min.css" />
    -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="styles/hackmd.min.css" />
    <link rel="stylesheet" href="styles/latex.min.css" />
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script>
        MathJax = {
            loader: {load: ['[tex]/amscd', '[tex]/textmacros']},
            tex: {
                packages: {'[+]': ['amscd','textmacros']},
                inlineMath: [['¥', '¥']],
                displayMath: [['¥¥', '¥¥']],
                macros:{
                    Abs: ['\\left\\lvert #1 \\right\\rvert',1],
                    abs: ['\\lvert #1 \\rvert',1],
                    Norm: ['\\left\\lVert #1 \\right\\rVert',1],
                    norm: ['\\lVert #1 \\rVert',1],
                    op: ['\\textrm{op}'],
                    dist: ["\\operatorname\{dist\}"],
                    Ker: ["\\operatorname\{Ker\}"],
                    Ima: ["\\operatorname\{Im\}"],
                    id: ["\\operatorname\{id\}"],
                    colim: ["\\operatorname\{colim\}"],
                    vol: ["\\operatorname\{vol\}"],
                    supp: ["\\operatorname\{supp\}"],
                    span: ["\\operatorname\{span\}"],
                    esssup: ["\\operatorname\{ess\ sup\}"],
                    sign: ["\\operatorname\{sgn\}"],
                }
            }    
        };
    </script>
    <script id="MathJax-script" async src="node_modules/mathjax/es5/tex-chtml.js">
    </script>
    <script src="scripts/environ.min.js"></script>
    <script>
        $(document).ready(function(){
            $("<span style=\"float:right;\">$\\square$</span>").appendTo("div.proof");
            $("<em>Proof.</em>").prependTo("div.proof");
            $("div.theorem, div.proposition, div.lemma, div.corollary").addClass("alert alert-info");
            $("div.theorem, div.proposition, div.lemma, div.corollary").attr("style", "font-style: italic;");
            $("div.definition").addClass("alert alert-warning");
            $("div.example").addClass("alert alert-secondary");


            
            $("<strong style=\"font-style: normal;\">Theorem "+"123"+".</strong>").prependTo("div.theorem");
            $('.collapse').on('show.bs.collapse', function () {
                if ($(this).children(".collapse").length == 0 && $(this).children(".collapsing").length == 0) {
                    $(this).get(0).innerHTML = $(this).get(0).innerHTML.replace(/\$/g, "¥");
                    setTimeout(function(){
                        MathJax.typesetPromise();
                    },0);
                }
                $(this).parent(".collapse").collapse("show");
            });
        });
    </script>
    
</head>

<body>  
<div id="doc" class="markdown-body container-fluid">
<h3>Contents</h3><div class="toc"><ul class="tocpage" id="toc-only"></ul></div>
<!-- Write below -->

<script>
    section("part","Preliminary")
</script>
<div class="collapse" id="content-preliminary">

<script>
    section("chapter","Category Theory")
</script>
<div class="collapse" id="content-category-theory">

<script>
    section("section","Limit")
</script>
<div class="collapse" id="content-limit">
<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $I$ be a small category and $\mathcal{A}$ a category. The <em style="color: teal;">diagonal functor</em> $\delta:\mathcal{A}\to\mathcal{A}^I$ is defined by $A\mapsto\Delta A$ with $(\Delta A)_i=A$ for all $i\in I$, and $\id_A:(\Delta A)_i\to(\Delta A)_j$ for all $i\to j$ in $I$.
</div>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $F:I\to\mathcal{A}$ be a functor $i\mapsto F_i$ with $I$ small. The <em style="color: teal;">colimit</em> of $F$ is an object $X$ in $\mathcal{A}$ such that $F\to\Delta X$ universally. This universal property implies that the colimit is unique whenever it exists, which is denoted by $\colim_i F_i$. Denote $\rho_i$ the canonical map $F_i\to\colim_iF$ for each i, called the <em style="color: teal;">insertion</em>.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $I$ be a small category, $\mathcal{A}$ a category, $F:I\to\mathcal{A}$ functor with its colimit exists in $\mathcal{A}$ and $f,g:\colim F_i\to Z$ two morphisms in $\mathcal{A}$. Then $f=g$ if and only if $f\circ\rho_i=g\circ\rho_i$ for all $i\in I$.
</em></div>
<p class="proof"><em>Proof.</em> Assume $f\circ\rho_i=h_i=g\circ\rho_i$ for all $i\in I$. Then $h:F\to\Delta Z$ defines a natural transformation since if $i\to j$ is a morphism in $I$ then the following diagram
\begin{CD}
F_i @>>> \colim_iF_i@>>>Z\\
@VVV @VVV @|\\
F_j @>>> \colim_iF_j@>>>Z
\end{CD}
commutes. By the universal property of colimit, $h$ factor through colimit as $$h:F\xrightarrow{\rho}\Delta\colim_iF_i\to\Delta Z$$ uniquely. Thus $f=g$.
<span style="float:right;">$\square$</span></p>
<div class="alert alert-warning">
<script >
theorem("Definition")
</script> A functor $\mathcal{A}$ is called <em style="color: teal;">cocomplete</em> if the limit of every functor $F:I\to\mathcal{A}$ exists whenever $I$ is small.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $I$ be a small category and $\mathcal{A}$ a cocomplete category. Then $$\colim:\mathcal{A}^I\to\mathcal{A}$$ forms a functor.
</em></div>

<p class="proof"><em>Proof.</em> Let $F$ and $G$ be functors $I\to\mathcal{A}$ with $\Phi:F\to G$ a morphism in $\mathcal{A}^I$, that is, a natural transformation. By the universal property of colimit, the composite $$F\to G\to\Delta\colim_iG_i$$ factors through colimit as
    \begin{CD}
    F @>>> \Delta\colim_iF_i\\
    @VVV @VVV\\
    G @>>> \Delta\colim_iG_i
    \end{CD}
Set $\colim\Phi$ to be the map $\Delta\colim_iF_i\to\Delta\colim_iG_i$ in $\mathcal{A}^I$, or equivalent, the map $\colim_iF_i\to\colim_iG_i$ in $\mathcal{A}$. Then $\colim$ forms a functor $\mathcal{A}^I\to\mathcal{A}$ once we verified that $\colim$ preserves composite, which is routine.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> A category $\mathcal{A}$ is cocomplete if and only if $\mathcal{A}$ admits all coproduct and coequalizer.
</em></div>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> We say a functor $F:\mathcal{A}\to\mathcal{B}$ <em style="color: teal;">preserves colimit</em> if for every functor $A_i$ from a small category $I$ to $\mathcal{A}$ with colimit exists in $\mathcal{A}$, the colimit of the functor $F(A_i)$ exists in $\mathcal{B}$ and $\colim_iF(A_i)\cong F(\colim_iA_i)$.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Every left adjoint functor preserves colimit.
</em></div>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> If $F:I\to\mathcal{A}$ is a functor with $I$ a directed set, then $\colim_iF_i$ is called a <em style="color: teal;">direct limit</em> whenever it eixsts and is denoted by $\varinjlim_iF_i$.
</div>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $X:I\to\mathcal{A}$ be a functor with $I$ a direct set. Then for any $i\leq j$ in $I$, there is a morphism $i\to j$. Write $\varphi_{ij}=X(i\to j):X_i\to X_j$. Then $\{X_i,\varphi_{ij},I\}$ is called a <em style="color: teal;">direct system</em> of $\mathcal{A}$.
</div>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> If $F:I\to\mathcal{A}$ is a contravariant functor with $I$ a direct set, then $\colim_iF_i$ is called an <em style="color: teal;">inverse limit</em> whenever it eixsts and is denoted by $\varprojlim_iF_i$.
</div>

<div class="alert alert-warning">
<script >
theorem("Definition",{"label":"INSYS"})
</script> Let $X:I\to\mathcal{A}$ be a contravariant functor with $I$ a direct set. Then for any $i\geq j$ in $I$, there is a morphism $j\to i$. Write $\varphi_{ij}=X(j\to i):X_i\to X_j$. Then $\{X_i,\varphi_{ij},I\}$ is called an <em style="color: teal;">inverse system</em> of $\mathcal{A}$.
</div>
</div>
</div>
</div>

<script>
    section("part","Analysis")
</script>
<div class="collapse" id="content-analysis">

<script>
    section("chapter","Topology")
</script>
<div class="collapse" id="content-topology">

<script>
    section("section","Inverse Limit")
</script>
<div class="collapse" id="content-inverse-limit">

<p>
Now we consider inverse systems (<script>ref("INSYS");</script>) in the category $\mathfrak{Top}$ of topological space. We have known that the category $\mathfrak{Top}$ is complete. Here is an explicit construction of inverse limit of topolgoical spaces:
</p>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $\{X_i,\varphi_{ij},I\}$ be an inverse system of topological spaces (respectively, topological groups) over a directed poset $I$. Then There exists an inverse limit of the inverse system $\{X_i,\varphi_{ij},I\}$ uniquely up to isomorphism, and is denoted by $\varprojlim X_i$.
</em></div>

<p class="proof"><em>Proof.</em> Define $X$ as the subspace (respectively, subgroup) of the direct product $\prod_{i\in I}X_i$ of topological spaces (respectively, topological groups) consisting of those tuples $(x_i)$ that satisfy the condition $\varphi_{ij}(x_i)=x_j$ if $x\geq j$. Let $\varphi_i:X\to X_i$ denote the restriction of the canonical projection $\prod_{i\in I}X_i\to X_i$. Then one easily checks that each $\varphi_i$ is continuous (respectively, a continuous homomorphism), and that $(X,\varphi_i)$ is an inverse limit.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"ILIC"})
</script><em> Let $\{X_i,\varphi_{ij}\}$ be a inverse system of Hausdorff topological spaces (respectively, topological groups), then $\varprojlim X_i$ is a closed subspace (respectively, closed subgroup) of $\prod_{i\in I}X_i$.
</em></div>

<p class="proof"><em>Proof.</em> Let $(x_i)\in\prod X_i\setminus\varprojlim X_i$. Then there exists $r,s\in I$ with $r\geq s$ and $\varphi_{rs}(x_r)\neq x_s$. Choose open disjoint neighborhood $U$ and $V$ of $\varphi_{rs}(x_r)$ and $x_s$ in$X_s$, respectively. Let $U'$ be an open neighborhood of $x_r$ in $X_r$, such that $\varphi_{rs}(U')\subseteq U$. Consider the basic open subset $W=\prod_{i\in I}V_i$ of $\prod_{i\in I}X_i$ where $V_r=U'$, $V_s=V$ and $V_i=X_i$ for $i\neq r,s$. Then $W$ is an open neighborhood of $(x_i)$ in $\prod_{i\in I}X_i$, disjoint from $\varprojlim X_i$. This shows that $\varprojlim X_i$ is closed.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $\{X_i,\varphi_{ij},I\}$ be an inverse system of compact Hausdorff totally disconnected topological spaces (respectively, topological groups) over the directed set $I$. Then $\varprojlim X_i$ is also a compact Hausdorff totally disconnected topological space (respectively, topological group).
</em></div>

<p class="proof"><em>Proof.</em> If follows from the fact that the product of totally disconnected spaces is totally disconnected, the product of compact sets is compact, a closed set in a compact set is compact, and the previous lemma.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"CHNE"})
</script><em> Let $\{X_i,\varphi_{ij}\}$ be an inverse system of compact Hausdorff non-empty topological spaces $X_i$ over the directed set $I$. Then $\varprojlim X_i$ is non-empty. In particular, the inverse limit of an inverse system of non-empty finite sets is non-empty.
</em></div>

<p class="proof"><em>Proof.</em> For each $j\in I$, define a subset $Y_j$ of $\prod X_i$ to consist of those $(x_i)$ with the property $\varphi_{jk}(x_j)=x_k$ whenever $k\leq j$. Using the axiom of choice and an argument similar to the one used in (<script>ref("ILIC");</script>), one easily checks that each $Y_j$ is a non-empty closed subset of $\prod X_i$. Observe that if $j\leq j'$, then $Y_j\supseteq Y_{j'}$. It follows that the collection of subsets $\{Y_j\mid j\in I\}$ has the finite intersection property, that is, any intersection of finitely many $Y_j$ is non-empty, since the poset $I$ is directed. Then, one deduces from the compactness of $\prod X_i$ that $\cap Y_j$ is non-empty. Since $\varprojlim X_i=\bigcap_j Y_j$, the result follows.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $\{X_i,\varphi_{ij}\}$ and $\{X'_i,\varphi'_{ij}\}$ be inverse system of topological spaces over the same directed poset $I$. A <em style="color: teal;">morphism</em> of inverse system $\Theta=\{\theta_i\}:\{X_i,\varphi_{ij}\}\to \{X'_i,\varphi'_{ij}\}$ is a natural transformation $X\to X'$. We say that the mappings $\theta_i$ are the <em style="color: teal;">components</em> of $\Theta$. A map $\Theta:\{X_i,\varphi_{ij}\}\to\{X_i,\varphi_{ij}\}$ of an inverse system to itself, whose components are identity mappings, is called the identity map of the system $\{X_i,\varphi_{ij}\}$, and it is usually denoted by $\id$. 
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $\{\theta_i\}:\{X_i,\varphi_{ij},I\}\to\{X'_i,\varphi'_{ij},I\}$ be a morphism of inverse systems of topological spaces (respectively, topological groups) such that each component $\theta_i:X_i\to X_i'$ is injective (respectively, bijective). Then $\varprojlim\theta_i$ is injective (respectively, bijective).
</em></div>

<p class="proof"><em>Proof.</em> Assume each component $\theta_i$ is injective. If $x\in\varprojlim X_i$ with $\varprojlim\theta_i(x)=0$, then $\theta_i\varphi_i(x)=\varphi_i'\varprojlim\theta_i(x)=0$ for all $i\in I$. Since $\theta_i$ is injective for each $i$, $\varphi_i(x)=0$ for each $i$. By construction, $x=0$ in $\varprojlim X_i$. Assume each component $\theta_i$ is bijective. Then it is clearly that $\{\theta_i^{-1}\}:\{X'_i,\varphi'_{ij},I\}\to\{X_i,\varphi_{ij},I\}$ forms a map of inverse system. Since $\varprojlim\theta_i^{-1}\varprojlim\theta_i=\varprojlim\id=\id$ on $\varprojlim X_i$ and similarly, $\varprojlim\theta_i\varprojlim\theta_i^{-1}=\id$ on $\varprojlim X_i'$, we see that $\varprojlim\theta_i$ is bijective.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Corollary")
</script><em> Let $\{A_i,f_{ij}\}$, $\{B_i,g_{ij}\}$ and $\{C_i,h_{ij}\}$ be three inverse system of topological spaces (respectively, topological groups) over the same directed poset $I$ such that the sequence $0\to A_i\to B_i\to C_i\to 0$ is exact for each $i\in I$. Then the induced sequence $0\to\varprojlim A_i\to\varprojlim B_i\to\varprojlim C_i$ is exact.
</em></div>

<div class="alert alert-secondary">
<script >
theorem("Example")
</script> In contrast, if each of the components $\theta_i$ is an onto mapping, $\varprojlim\theta_i$ is not necessarily onto. For example, consider the natural numbers $I=\mathbf{N}$, with the usual partial ordering, as our indexing poset; define two inverse systems over $I$ as follows: the constant inverse system $\{\mathbf{Z},\id\}$, and the inverse system $\{\mathbf{Z}/p^n\mathbf{Z},\varphi_{nm}\}$, where $\varphi_{nm}:\mathbf{Z}/p^n\mathbf{Z}\to\mathbf{Z}/p^m\mathbf{Z}$ is the natural projection for $m\leq n$. For each $n\in\mathbf{N}$, define $\theta_n\mathbf{Z}\to\mathbf{Z}/p^n\mathbf{Z}$ to be the canonical epimorphism. Then $\theta_n$ form a morphism of inverse systems. Observe that the inverse limit of the first system is $\mathbf{Z}$, while the inverse limit of the second can be identified with 
$
\varprojlim\mathbf{Z}/p^n\mathbf{Z}=\{(x_n)\mid x_n\in\mathbf{Z},x_n\equiv x_m\bmod{p^m}\textrm{ if }m\leq n\}.
$
The image of $\mathbf{Z}$ in $\varprojlim\mathbf{Z}/p^n\mathbf{Z}$ under $\varprojlim\theta_n$ is the set of all constant tuples $\{(a_n)\mid a_n=t,t\in\mathbf{Z}\}$. On the other hand, the tuple $(b_n)$, where $b_n=1+p+\cdots+p^{n-1}$, is in $\varprojlim\mathbf{Z}/p^n\mathbf{Z}$, but it is not constant. Thus $\varprojlim\theta_n$ is not onto. However, for inverse system of compact Hausdorff spaces, one has the following result.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $\Theta:\{X_i,\varphi_{ij},I\}\to\{X'_i,\varphi'_{ij}mI\}$ be a map of inverse systems of compact Hausdorff topological spaces (respectively, topological groups), and assume that each component $\theta_i:X_i\to X_i'$ is onto. Then $\varprojlim\theta_i$ is onto.
</em></div>

<p class="proof"><em>Proof.</em> Let $(x_i')\in\varprojlim X'_i$. Put $\widetilde{X}_i=\theta_i^{-1}(x_i')$ for $i\in I$. Since $\widetilde{X}_i$ is closed in the compact space $X_i$, it follows that $\widetilde{X}_i$ is compact for $i\in I$. Observe that $\varphi_{ij}(\widetilde{X}_i)\subseteq\widetilde{X}_j$ for $i\geq j$. Thus $\{\widetilde{X}_i,\varphi_{ij}\}$ is an inverse system of non-empty compact topological spaces (respectively, compact topological groups). By (<script>ref("CHNE");</script>), $\varprojlim\widetilde{X}_i$ is non-empty. Let $(x_i)$ be any element in $\varprojlim\widetilde{X}_i\subseteq\varprojlim X_i$. Then one has $(\varprojlim\theta)(x_i)=(x_i')$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Corollary",{"label":"CHSS"})
</script><em> Let $\{X_i,\varphi_{ij},I\}$ be an inverse system of compact Hausdorff spaces and $X$ a compact Hausdorff space. Suppose that $\{\varphi_i:X\to X_i\}_{i\in I}$ is a set of compatible continuous surjective mappings. Then the corresponding induced mapping $\theta:X\to\varprojlim X_i$ is onto.
</em></div>

<p class="proof"><em>Proof.</em> Consider the constant inverse system $\{X,\id\}$ over $I$. The collection $\{\theta_i\}$ can be thought of as a map from $\{X,\id\}$ to $\{X_i,\varphi_{ij}\}$. Then $\theta=\varprojlim\theta_i$, and the result follows from the previous proposition.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Lemma")
</script><em> Let $\{X_i,\varphi_{ij},I\}$ be an inverse system of topological spaces over a directed set $I$, and let $\rho_i:X\to X_i$ by compatible surjections from the space $X$ onto the spaces $X_i$. Then either $\varprojlim X_i=\emptyset$ or the corresponding induced mapping $\rho:X\to\varprojlim X_i$ maps $X$ onto a dense subset of $\varprojlim X_i$.
</em></div>

<p class="proof"><em>Proof.</em> Suppose $\varprojlim X_i\neq\emptyset$. A general basic open subset $V$ of $\varprojlim X_i$ can be described as follows: let $i_1,\ldots,i_n$ be a finite subset of $I$ and let $U_{i_j}$ be an open subset of $X_{i_j}$, $j=1,\ldots,n$. Let $V=(\varprojlim X_i)\cap(\prod_{i\in I}V_i)$ where $V_{i_j}=U_{i_j}$, $j=1,\ldots,n$, and $V_i=X_i$ for $i\neq i_1,\ldots,i_n$. Assume such $V$ is not empty. We have to show that $\rho(X)\cap V$ is not empty. Let $i_0\geq i_1,\ldots,i_n$, and let $y=(y_i)\in V$. Choose $x\in X$ so that $\rho_{i_0}(x)=y_{i_0}$. Then $\rho(x)\in V$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $(I,\leq)$ be a directed poset. Assume that $I'$ is a subset of $I$ in such a way that $(I',\leq)$ becomes a directed poset. We say that $I'$ is <em style="color: teal;">cofinal</em> in $I$ if for every $i\in I$ there is some $i'\in I'$ such that $i\leq i'$. If $\{X_i,\varphi_{ij},I\}$ is an inverse system and $I'$ is cofinal in $I$, then $\{X_i,\varphi_{ij},I'\}$ becomes an inverse system in an obvious way, and we say that $\{X_i,\varphi_{ij},I'\}$ is a cofinal subsystem of $\{X_i,\varphi_{ij},I\}$. Denote by $(\varprojlim_{i'\in I'}X_{i'},\varphi'_{i'})$ and $(\varprojlim_{i\in I}X_i,\varphi_i)$ their corresponding inverse limits. For $j\in I$, let $j'\in I'$ be such that $j'\geq j$. Define $\overline{\varphi}_j:\varprojlim_{I'}X_{i'}\to X_j$ as the composition of canonical mappings $\varphi_{j'j}\varphi'_{j'}$. Observe that the maps $\overline{\varphi}_j$ are well-defined (independent of the choice of $j'$) and compatible. Hence they induce a map $\overline{\varphi}:\varprojlim_{I'}X_{i'}\to\varprojlim_I X_i$ such that $\varphi_j\overline{\varphi}=\overline{\varphi}_j$ for $j\in I$.
</div>

<div class="alert alert-info">
<script >
theorem("Lemma")
</script><em> Let $\{X_i,\varphi_{ij},I\}$ be an inverse system of compact topological spaces (respectively, compact topological groups) over a directed poset $I$ and assume that $I'$ is a cofinal subset of $I$. Then the canonical map $\varprojlim_{i\in I}X_i\to \varprojlim_{i'\in I'}X_{i'}$ is a topologically isomorphism.
</em></div>

<p class="proof"><em>Proof.</em> We claim that the mapping $\overline{\varphi}:\varprojlim_{i\in I}X_i\to \varprojlim_{i'\in I'}X_{i'}$ is a continuous bijection. Note that if $(x_i)\in\varprojlim_{i'\in I'}X_{i'}$ and $\overline{\varphi}(x_{u'})=(y_i)$, then $y_{i'}=x_{i'}$ for $i'\in I'$. It follows that $\overline{\varphi}$ is an injection since $I'$ is cofinal in $I$. To see that $\overline{\varphi}$ is a surjection, let $(y_i')\in\varprojlim_{i\in I}X_i$ and consider the element $(x_{i'})$, where $x_{i'}=y_{i'}$ for every $i'\in I'$. Then $(x_{i'})\in\varprojlim_{i'\in I'}X_{i'}$ and clearly, $\overline{\varphi}(x_{i'})=(y_i)$. This proves the claim, and the result follows from the fact that $\varprojlim_{i\in I}X_i$ is compact and $\varprojlim_{i'\in I'}X_{i'}$ is Hausdorff.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> An inverse system $\{X_i,\varphi_{ij},I\}$ is called a <em style="color: teal;">surjective inverse system</em> if each of the mappings $\varphi_{ij}$ with $i\geq j$ is surjective.
</div>

<p>
Let $\{X_i,\varphi_{ij},I\}$ be an inverse system of topological spaces $X_i$ over a poset $I$. Put $X=\varprojlim X_i$, and let $\varphi_j:X\to X_j$ be the projection map. Assume that $X\neq 0$. If $\varphi_j$ is a surjection for each $i\in I$, then evidently $\varphi_{rs}:X_r\to X_s$ is a surjection for all $r,s\in I$ with $r\geq s$ (since $\varphi_{rs}\varphi_r=\varphi_s$). The converse is not necessary true. However, we have the following.
</p>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $\{X_i,\varphi_{ij},I\}$ be a surjective inverse system of compact Hausdorff non-empty topological spaces $X_i$ over a directed poset $I$. Then for each $j\in I$, the projection map $\varphi_j:\varprojlim X_i\to X_j$ is a surjection.
</em></div>

<p class="proof"><em>Proof.</em> Fix $j\in I$. The set $I_j=\{i\in I\mid i\geq j\}$ is cofinal in $I$. By the previous lemma, $\varprojlim_{i\in I_j}X_i\cong\varprojlim_{i\in I}X_i$. Therefore, we may assume that $i\geq j$ for every $i\in I$. Let $x_j\in X_j$ and set $Y_r=\varphi_{rj}^{-1}(x_j)$ for $r\in I$. Since $\varphi_{rj}$ is onto and continuous, $Y_r$ is a non-empty compact subset of $X_r$, $r\in I$. Furthermore, if $r\geq s$ are indices in $I$, then $\varphi_{rs}(Y_{r})\subseteq Y_s$ by the surjectivity of those $\varphi_{ij}$. Hence $\{Y_r,\varphi_{rs},I\}$ is an inverse system. According to (<script>ref("CHNE");</script>), $\varprojlim Y_r$ is non-empty. Let $(y_r)\in\varprojlim Y_i\subseteq\varprojlim X_i$. Then $\varphi_j(y_r)=x_j$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> A topological space is <em style="color: teal;">profintie</em> if it is homeomorphic to an inverse limit (over a direct poset) of finite discrete spaces.
</div>
</div>

<script>
    section("section","Connected Set")
</script>
<div class="collapse" id="content-connected-set">



<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"COCF"})
</script><em> Let $G$ be a compact topological group and $U$ a subgroup of $G$. Then $U$ is open if and only if $U$ is closed of finite index.
</em></div>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"OFON"}) 
</script><em> Let $G$ be a topological group and $H$ an open subgroup of $G$ of finite index. Then $H$ contains an open normal subgroup of $G$.
</em></div>

<p class="proof"><em>Proof.</em> Let $H'$ be the intersection of all conjugate $gHg^{-1}$ of $H$ in $G$, which is open since $H$ is of finite index in $G$. Then $H'$ is normal in $G$ and contained in $H$ since every group is conjugate to itself.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Lemma",{"label":"CEL"})
</script><em> Let $X$ be a compact space, $U\subseteq X$ open subset and $\mathcal{C}$ a collection of closed subsets of $X$ such that $\bigcap_{C\in\mathcal{C}} C\subseteq U$. Then there exists $C_1,\ldots,C_n\in\mathcal{C}$ such that $C_1\cap\cdots\cap C_n\subseteq U$.
</em></div>

<p class="proof"><em>Proof.</em> For each $C\in\mathcal{C}$, $C\setminus U$ is closed in $X$. Hence $\bigcap_{C\in\mathcal{C}}(C\setminus U)=\emptyset$ implies that $(C_1\setminus U)\cap\cdots\cap(C_n\setminus U)=\emptyset$ for some $C_1,\ldots,C_n$ in $\mathcal{C}$. Hence $C_1\cap\cdots\cap C_n\subseteq U$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $X$ be a topologial space and $x\in X$. The <em style="color: teal;">quasi-component</em> of $x$ is the intersection of all clopen subsets of $X$ containing $x$.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"QCCC"})
</script><em> Let $X$ be Hausdorff, $x\in X$, $C(x)$ the connected component of $X$ and $Q(x)$ the quasi-component of $x$. Then $C(x)\subseteq Q(x)$, with the eqaulity holds if $X$ is compact.
</em></div>

<p class="proof"><em>Proof.</em> If $Y$ is connected in $X$ and $C$ is clopen in $X$ such that $x\in Y\cap C$, then $Y\subseteq C$, as otherwise there exists $y$ in $Y$ not in $C$ so that $Y$ is disconnected given by  $\{x\}$ and $(Y\cap C)\setminus\{x\}$. Hence the connected component of $x$ is contained in every clopen subset of $X$ containing $x$, and the first result follows. Conversely, assume $X$ is compact. We need to show that $Q(x)$ is connected. If $Q(x)=A\cup B$ for som disjoint $A$, $B$ clopen in $Q(x)$, then we may assume $x\in A$ and we need to show that $B=\emptyset$. By definition, $Q(x)$ is closed in $X$. Hence $A$ and $B$ are disjoint compact subset of $X$. Since $X$ is normal by (), there exist disjoint open sets $U,V$ of $X$ such that $A\subseteq Y$ and $B\subseteq V$. Since $Q(x)\subseteq U\cup V$ and $Q(x)$ is some intersection of clopen set $\{C_i\}_{i\in I}$, by (<script>ref("CEL");</script>), there are clopen sets $C_1,\ldots,C_n$ such that $x\in C_1\cap\cdots\cap C_n\subseteq U\cup V$. Hence $C=C_1\cap\cdots\cap C_n$ is clopen. Consider the set $D=C\cap U$. Since $x\in A\subseteq U$, $D$ contains $x$. $D$ is clearly open, but it is also closed since $U$ and $V$ are disjoint and we can write $D=C\cap (X\setminus V)$. It follows that $Q(x)\subseteq D$. Since $B=Q(x)\cap V$ and $D$ does not intersect $V$, we conclude that $B=\emptyset$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> A topological space $X$ is <em style="color: teal;">totally disconnected</em> if for every point $x\in X$, the connected component of $x$ consists of only $x$ itself.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"LCHT"})
</script><em> Let $X$ be a LCH space. Then $X$ is totally disconnected if and only if it has a basis of topology consisting of compact open sets.
</em></div>

<p class="proof"><em>Proof.</em> If $X$ has a clopen topological basis, then for any $x\in X$, we can choose a compact open subset $U$ of $X$ containing $x$ so that $U\setminus\{x\}$ is compact as well. Cover $U\setminus\{x\}$ by compact open subset of $X$, we see that $U\setminus\{x\}$ is a finite union of compact open sets and so $U\setminus\{x\}$ is closed. Hence $\{x\}$ is open in $U$ and so in $X$. It follows that $C(x)=\{x\}$ by ().<br>
Conversely, assume $X$ is totally disconnected. We first assume $X$ is compact. Take a point $x\in X$ and an open neighborhood $U$ of $x$. Since $Q(x)=C(x)=\{x\}$ by (<script>ref("QCCC");</script>), the definition of $Q(x)$ and (<script>ref("CEL");</script>) implies that there is a clopen set $C$ of $X$ such that $x\in C\subseteq U$. This shows that the clopen sets form a topological basis. For the general case, take a point $x\in X$ and an open neighborhood $U$ of $x$. By the local compactness of $X$, there exists an open neighborhood of $x$ such that $\overline{V}$ is compact and contained in $U$. The compact space $\overline{V}$ is totally disconnected. Hence, by the previous case, there exists a subset $C$ of $\overline{V}$ such that it is compact and open in teh subspace topology and $x\in C\subseteq V$. But then $C$ is open in $X$, as $V$ is open. Thus $C$ is a compact open subset of $X$ and $x\in C\subseteq U$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Corollary",{"label":"COID"})
</script><em> Let $X$ be a totally disconnected LCH space and $K$ a closed subset of $X$. Then every clopen set in $K$ is an intersection of $K$ with a clopen set of $X$.
</em></div>

<p class="proof"><em>Proof.</em> Let $U$ be a clopen subset of $K$. Then $U=K\cap V$ for some open set $V$ of $X$. By (<script>ref("LCHT");</script>) we can write $V=\bigcup_i V_i$ as a union of clopen sets of $X$. Then $U=K\cap(\bigcup_i V_i)\subseteq\bigcup_iV_i$ and the compactness of $U$ implies that $U=K\cap(V_1\cup\ldots\cup V_n)$ for some $V_1,\ldots,V_n$ clopen in $X$, as desired.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Lemma",{"label":"CPSS"})
</script><em> Let $G$ be a topological group and $U$ a compact open subset of $G$ containing the identity. Then $U$ contains a compact open subgroup.
</em></div>

<p class="proof"><em>Proof.</em> Fix $x\in U$. Since $U$ is open, there is a open neighborhood $V_x$ such that $xV_x^2\subseteq U$. By the compactness, we can extract a finite subcover $\{V_{x_i}\}_{i=1}^n$ of $U$. Define $V=\bigcap_{i=1}^n V_{x_i}$. Then $$UV\subseteq\left(\bigcup_{i=1}^nx_iV_{x_i}\right)V\subseteq\bigcup_{i=1}^nx_iV_{x_i}^2\subseteq U.$$ Set $W=U\cap U^{-1}\cap V\cap V^{-1}$. Then $W^{-1}=W$ and by induction, we see that
\begin{align}
W&\subseteq U\\
W^2&=WW\subseteq UV\subseteq U\\
&\vdots\\
W^{n+1}&=W^nW\subseteq UV\subseteq U
\end{align}
for all $n\in\mathbf{N}$. Thus the subgroup  $Q$ generated by $W$, which is equal to $\bigcup_{n\geq 1}W^n$, is open and included in $U$. Since every open subgroup is closed and since $U$ is compact, $Q$ is compact, as desired.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"PROF"})
</script><em> Let $G$ be a topological group. Then the following statements are equivalent:</em>
<ol class="parenthesis" style="font-style: italic;">
    <li>$G$ is profinite.</li>
    <li>$G$ is a compact group that is totally disconnected.</li>
    <li>$G$ is a compact group that has a topological basis consisting of compact open subgroups.</li>
    <li>$G$ is a compact group that has a topological basis consisting of compact open normal subgroups.</li>
</ol>
</div>

<p class="proof"><em>Proof.</em> (i) implies (ii) clearly, and (ii) implies (iii) by (<script>ref("LCHT");</script>) and (<script>ref("CPSS");</script>). (iii) implies (iv) by (<script>ref("COCF");</script>) and (<script>ref("OFON");</script>). To show that (iv) implies (i), suppose that $X$ is compact Hausdorff and admits a base of clopen sets for its topology. Denote by $\mathcal{R}$ the collection of all open equivalence relations $R$ on $X$; for such $R$, the space $X/R$ is finite and discrete since $X$ is compact. The set $\mathcal{R}$ is naturally ordered as follows: if $R,R'\in\mathcal{R}$, then $R\geq R'$ if and only if $xR\subseteq xR'$ for all $x\in X$. Then $\mathcal{R}$ is a poset. To see that this poset is directed. Let $R_1$ and $R_2$ be two equivalence relations on $X$. Define its intersection $R_1\cap R_2$ to be the equivalence relation corresponding to the partition of $X$ obtained by intersecting each equivalence class of $R_1$ with each equivalence class of $R_2$. Clearly $R_1\cap R_2\geq R_1,R_2$. Now, if $R,R'\in\mathcal{R}$ and $R\geq R'$, define $\varphi_{RR'}:X/R\to X/R'$ by $\varphi_{RR'}(xR)=xR'$. Then $\{X/R,\varphi_{RR'}\}$ is an inverse system over $\mathcal{R}$. We shall show that $X\cong\varinjlim_{R\in\mathcal{R}}X/R$. Let $\psi:X\to\varinjlim_{R\
\mathcal{R}} X/R$ be the continuous mapping induced by the canonical continuous surjections $\psi_R:X\to X/R$. By (<script>ref("CHSS");</script>), $\psi$ is a continuous surjection. To prove that $\psi$ is a homeomorphism, it suffices to prove that it is an injection, since $X$ is compact and $\varinjlim_{R\in\mathcal{R}}X/R$ is Hausdorff. Let $x,y\in X$ with $x\neq y$. By hypothesis, there exists a clopen neighborhood $U$ of $x$ that excludes $y$. Consider the equivalence relation $R'$ on $X$ with two equivalence class: $U$ and $X\setminus U$. Clearly, $R'\in\mathcal{R}$ and $\psi_{R'}(x)\neq\psi_{R'}(y)$. So $\psi(x)\neq\psi(y)$. Thus, $\psi$ is an injection.
<span style="float:right;">$\square$</span></p>

<p>
A non-compact generalization of a profinite group is a locally profinite group:
</p>

<div class="alert alert-warning">
<script >
theorem("Definition",{"label":"DOLP"})
</script> A topolgoical group $G$ is called <em style="color: teal;">locally profinite</em> if every open neighborhood of the identity element contains a compact open subgroup. By (<script>ref("LCHT");</script>) and (<script>ref("CPSS");</script>), this is equivalent to say that $G$ is locally copmact and totally disconnected.
</div>

<div class="alert alert-info">
<script >
theorem("Corollary")
</script><em> Every locally profinite group is profinite.
</em></div>

<p class="proof"><em>Proof.</em> Immediate from (<script>ref("PROF");</script>).
<span style="float:right;">$\square$</span></p>
</div>
</div>

<script>
    section("chapter","Real Analysis")
</script>
<div class="collapse" id="content-real-analysis">

<script>
    section("section","Differential")
</script>
<div class="collapse" id="content-differential">

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> A set function is a real-valued function $F$ defiend on a $\sigma$-algebra $\Sigma$ of measurable sets is called a <em style="color: teal;">set function</em> if $F(E)$ is finite for every $E\in\Sigma$ and that $F$ is countably additive.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Given $f\in L(A)$ with $A$ a measurable subset of $\mathbf{R}^n$, define $F(E)=\int_E(f)$ for any measurable subset $E$ of $A$. Then $E\mapsto F(E)$ is a set function.
</em></div>

<p class="proof"><em>Proof.</em>
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> A set function $F$ is called <em style="color: teal;">continuous</em> if $F(E)$ tends to zero as the diameter of $E$ tends to zero, that is, $F$ is continuous if, given $\varepsilon>0$, there exists $\delta>0$ such that $\abs{F(E)}&lt;\varepsilon$ whenever the diameter of $E$ is less then $\delta$. A set function $F$ is called <em style="color: teal;">absolutely continuous</em> (with respect to Lebesgue measure) if $F(E)$ tends to zero as the measure of $E$ tends to zero
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> A set function that is absolutely continuous is continuous.
</em></div>

<p class="proof"><em>Proof.</em> Clearly.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"IIIA1"})
</script><em> If $f\in L(A)$, its indefinite integral is absolutely continuous.
</em></div>

<p class="proof"><em>Proof.</em> We may assume that $f\geq 0$ by consider $f^+$ and $f^-$. Fix $k$ and write $f=g+h$, where $g=f$ whenever $f\leq k$ and $g=k$ otherwise. Given $\varepsilon>0$, we may choose $k$ so large that $0\leq\int_Ah&lt;\varepsilon/2$ by () and so $0\leq\int_Eh&lt;\varepsilon/2$ for every measurable $E\subseteq A$. On the other hand, since $0\leq g\leq k$, we have $0\leq\int_Eh\leq k\abs{E}&lt;\varepsilon/2$ if $\abs{E}$ is small enough. Thus
$$
0\leq\int_Ef=\int_Eg+\int_Eh&lt;\frac{1}{2}\varepsilon+\frac{1}{2}\varepsilon=\varepsilon
$$
if $\abs{E}$ is small enough. This complete the proof.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $f\in L(\mathbf{R}^n)$ and $F$ the indefinite integral of $f$. Let $Q$ denote an $n$-dimensional cube. Given $x\in\mathbf{R}^n$, we consider those $Q$ centered at $x$ and ask whether the average
$$
\frac{F(Q)}{\abs{Q}}=\frac{1}{\abs{Q}}\int_Qf(y)dy
$$
converges to $f(x)$ as $Q$ contracts to $x$. If this is the case, we write
$$
\lim_{Q\searrow x}\frac{F(Q)}{\abs{Q}}=f(x)
$$
and say that the indefinite integral of $f$ is <em style="color: teal;">differentiable</em> at $x$ with derivative $f(x)$.
</div>

<div class="alert alert-info">
<script >
theorem("Theorem",{"name":"Lebesgue","label":"LGDT"})
</script><em> If $f\in L(\mathbf{R}^n)$, its indefinite integral is differentiable with derivative $f(x)$ at almost every $x\in\mathbf{R}^n$.
</em></div>

<p class="proof"><em>Proof.</em> The theorem is easy to prove for continuous functins. In fact, if $f$ is continuous at $x$ and $Q$ is a cube with center $x$, then
$$
\Abs{\frac{1}{\abs{Q}}\int_Qf(y)dy-f(x)}=\Abs{\frac{1}{\abs{Q}}\int_Qf(y)-f(x)dy}\leq\frac{1}{\abs{Q}}\int_Q\abs{f(y)-f(x)}dy\leq\sup_{y\in Q}\abs{f(y)-f(x)},
$$
which tends to zero as $Q$ shrinks to $x$ by the continuity of $f$. To prove the general case, we need some new ideas.</p>

<div class="alert alert-info">
<script >
theorem("Lemma")
</script><em> Let $\mu$ be an outer Radon measure on a locally compact Hausdorff space $X$. Then the sapce $C_c(X)$ is dense in $L^p(\mu)$ for every $1\leq p&lt;\infty$.
</em></div>

<p class="proof"><em>Proof.</em> Fix $p$ as in the lemma and let $V\subseteq L^p(\mu)$ be the closure of $C_c(X)$ inside $L^p=L^p(\mu)$. We have to show $V=L^p$. By (), the sapce of Lebesgue step functions is dense in $L^p$ and any such is a linear combination of functions of the form $1_A$, where $A\subseteq X$ is finite measurable. So we have to show $1_A\in V$. By outer regularity, there exists a sequence $U_n\supseteq A$ of open sets such that $1_{U_n}$ converges to $1_A$ in $L^p$. So it suffices to assume that $A$ is open. By weak inner regularity we similarly reduce to the case when $A$ is compact. For given $\varepsilon>0$ there exists an open set $U\supseteq A$ with $\mu(U-A)&lt;\varepsilon$. By (), there is $g\in C_c(X)$ with $0\leq g\leq 1$ vanishing outside $U$ and is constantly equal to $1$ on $A$. Then the estimate
$$
\norm{1_A-g}_p^p=\int_{U-A}\abs{g(x)}^pdx\leq\mu(U-A)&lt;\varepsilon
$$
shows the claim.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Lemma",{"name":"Simple Vitali Lemma","label":"SVCL"})
</script><em> Let $E$ be a subset of $\mathbf{R}^n$ with $\abs{E}_e&lt;+\infty$, and let $K$ be a collection of cubes $Q$ covering $E$. Then there exist a positive constant $\beta$, depending only on $n$, and a finite number of disjoint cubes $Q_1,\ldots,Q_N$ in $K$ such that
$$
\sum_{j=1}^N\abs{Q_j}\geq\beta\abs{E}_e.
$$
</em></div>

<p class="proof"><em>Proof.</em> We will index the size of a cube $Q\in K$ by writing $Q=Q(t)$, where $t$ is the edge length of $Q$. Let $K_1=K$ and
$$
t_1^\ast=\sup\{t\mid Q=Q(t)\in K_1\}.
$$
If $t_1^\ast=+\infty$, then $K_1$ contains a sequence of cubes $Q$ with $\abs{Q}\to+\infty$. In this case, given $\beta>0$, we simply choose one $Q\in K-1$ with $\abs{Q}\geq\beta\abs{E}_e$. If $t_1^\ast&lt;+\infty$, the idea is still to pick a relatively large cube: choose $Q_1=Q_1(t_1)\in K_1$ such that $t_1>t_1^\ast/2$. Now split $K_1=K_2\cup K_2'$, where $K_2$ consists of those cubes in $K_1$ that are disjoint from $Q_1$, and $K_2'$ of those that intersect $Q_1$. Let $Q_1^\ast$ denote the cube ceoncentric with $Q_1$ whose edge length is $5t_1$. Thus $\abs{Q_1^\ast}=5^n\abs{Q_1}$, and since $2t_1>t_1^\ast$, every cube in $K_2'$ is contained in $Q_1^\ast$. Starting with $j=2$, continus this selection process for $j=2,3,\ldots$, by letting
$$
t_j^\ast=\sup\{t\mid Q=Q(t)\in K_j\},
$$
choosing a cube $Q_j=Q_j(t_j)\in K_j$ with $t_j>t_j^\ast/2$, and splitting $K_j=K_{j+1}\cup K_{j+1}'$, where $K_{j+1}$ consists of all those cubes of $K_j$ that are disjoint from $Q_j$. If $K_{j+1}$ is empty, the process ends. We have $t_j^\ast\geq t_{j+1}^\ast$ for each $j$; moreover, for each $j$, the $Q_1,\ldots,Q_j$ are disjoint from one another and from every cube in $K_{j+1}$, and every cube in $K_{j+1}'$ is contained in the cube $Q_j^\ast$ concentric with $Q_j$ whose edge length is $5t_j$. Note that $\abs{Q_j^\ast}=5^n\abs{Q_j}$.</p>
<p> Consider the sequence $t_1^\ast\geq t_2^\ast\geq\cdots$. If some $K_{N+1}$ is empty, then since
$$
K_1=K_2\cup K_2'=\cdots=K_{N+1}\cup K_{N+1}'\cup\cdots K_2',
$$
and $E$ is covered by the cubes in $K_1$, it follows that $E$ is covered by the cubes in $K_{N+1}'\cup K_{N+1}'\cup\cdots K_2'$. Hence $E\subseteq\bigcup_{j=1}^N Q_j^\ast$, so that
$$
\abs{E}_e\leq\sum_{j=1}^N\abs{Q_j^\ast}=5^n\sum_{j=1}^N\abs{Q_j}.
$$
This proves the lemma with $\beta=5^{-n}$. On the other hand, if no $t_j^\ast$ is zero, then either there exists a $\delta>0$ such that $t_j^\ast\geq\delta$ for all $j$, or $t_j^\ast\to 0$. In the first case, $t_j\geq\delta/2$ for all $j$ and, therefore, $\sum_{j=1}^N\abs{Q_j}\to\infty$ as $N\to\infty$. Given any $\beta>0$, the lemma follows in this case by choosing $N$ sufficiently large. Finally, if $t_j^\ast\to 0$, we claim that every cube in $K_1$ is contained in $\bigcup_jQ_j^\ast$. Otherwise, there would be a cube $Q=Q(t)$ not intersecting any $Q_j$. Since this cube would belong to every $K_j$, $t$ would satisfy $t\leq t_j^\ast$ for every $j$ and, therefore, $t=0$. This contraditiction establishes the claim. Since $E$ is covered by the cubes in $K_1$, it follows that
$$
\abs{E}_e\leq\sum_j\abs{Q_j^\ast}=5^n\sum_j\abs{Q_j}.
$$
Hence, given $\beta$ with $0&lt;\beta&lt;5^{-n}$, there exists an $N$ such that $\sum_{j=1}^N\abs{Q_j}\geq\beta\abs{E}_e$. This completes the proof.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition") 
</script> Let $f\in L(\mathbf{R}^n)$. The maximal function $Mf$ of $f$ is
$$
Mf(x)=\sup\frac{1}{\abs{Q}}\int_Q\abs{f(y)}dy,\quad x\in\mathbf{R}^n
$$
where the sup is taken over all $Q$ center $x$.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $f\in L(\mathbf{R}^n)$. Then $Mf$ is lower semicontinuous in $\mathbf{R}^n$. In particular, it is measurable.
</em></div>

<p class="proof"><em>Proof.</em> The function $Mf\geq 0$ is lower semicontinuous if $E_t:=\{x\mid Mf(x)>t\}$ is open for every $0&lt;t&lt;\infty$. To prove that $E_t$ is open, let $x\in E_t$. Then there exists $r>0$ such that
$$
\frac{1}{\abs{B(x,r)}}\int_{B(x,r)}\abs{f(y)}dy>t.
$$
Choose $r'>r$ such that we still have
$$
\frac{1}{\abs{B(x,r')}}>t.
$$
If $\abs{x'-x'}&lt;r'-r$, then $B(x,r)\subseteq B(x',r')$, so
$$
t&lt;\frac{1}{\abs{B(x,r')}}\int_{B(x,r)}\abs{f(y)}dy\leq\frac{1}{\abs{B(x',r)}}\int_{B(x',r')}\abs{f(y)}dy\leq Mf(x').
$$
It follows that $x'\in E_t$, which proves that $E_t$ is open.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> For any $f\in L(\mathbf{R}^n)$ integrable or not, $f$ is siad to be <em style="color: teal;">weak integrable</em> on $\mathbf{R}^n$ if there is a constant $c$ such that for any $\alpha>0$,
$$
\abs{\{x\in\mathbf{R}^n:\abs{f(x)}>\alpha\}}\leq\frac{c}{\alpha}.
$$
</div>

<div class="alert alert-info">
<script >
theorem("Lemma",{"name":"Hardy-Littlewood","label":"HDLW"})
</script><em> If $f\in L(\mathbf{R}^n)$, then $Mf$ is weak integrable.
</em></div>

<p class="proof"><em>Proof.</em> Fix $\alpha>0$ and let $E=\{Mf\geq\alpha\}$. If $x\in E$, then by the definition of $E$ and $Mf$, there is a cube $Q_x$ with center $x$ such that
$$
\frac{1}{\abs{Q_x}}\int_{Q_x}\abs{f}\geq\alpha.
$$
Equivalently,
$$
\abs{Q_x}&lt;\frac{1}{\alpha}\int_{Q_x}\abs{f}.
$$
The collection of such $Q_x$ covers $E$. For $k=1,2,\ldots$, the sets $E_k$ defined by $E_k=E\cap\{x:\abs{x}&lt;l\}$ are also covered and have finite measure. By (<script>ref("SVCL");</script>) applied to each $E_k$, there exists $\beta>0$ (depending only on $n$) and a finite number of points $\{x_j^{(k)}\}_j\subseteq E$ such that the cubes $Q_{x_j^{(k)}}$ are disjoint in $j$ (for each $k$) and $\abs{E_k}&lt;\beta^{-1}\sum_j\abs{Q_{x_j^{(k)}}}$. Therefore,
$$
\abs{E_k}&lt;\frac{1}{\beta}\sum_j\frac{1}{\alpha}\int_{Q_{x_j}^{(k)}}\abs{f}=\frac{1}{\beta\alpha}\int_{\bigcup_jQ_{x_j}^{(k)}}\abs{f}\leq\frac{1}{\beta\alpha}\int_{\mathbf{R}^n}\abs{f}.
$$
Since $E_k\nearrow E$ as $k\to\infty$, it follows from () that $\abs{E}\leq\frac{1}{\beta\alpha}\int_{\mathbf{R}^n}\abs{f}$, which proves the lemma with $c=\beta^{-1}$.
<span style="float:right;">$\square$</span></p>

<p class="proof"><em>Proof of <span style="font-style: normal;">(<script>ref("LGDT");</script>)</span>.</em> Given $f\in L(\mathbf{R}^n)$, there exists by () a sequence of continuous integrable $C_k$ such that $\int_{\mathbf{R}^n}\abs{f-C_k}\to 0$. Let $F(Q)=\int_Qf$ and $F_k(Q)=\int_QC_k$. Then for any $k$,
$$
\limsup_{Q\searrow x}\Abs{\frac{F(Q)}{\abs{Q}}-f(x)}\leq\limsup_{Q\searrow x}\Abs{\frac{F(Q)}{\abs{Q}}-\frac{F_k(Q)}{\abs{Q}}}+\limsup_{Q\searrow x}\Abs{\frac{F_k(Q)}{\abs{Q}}-C_k(x)}+\abs{C_k(x)-f(x)}.
$$
Since $C_k$ is continuous, the second term on the right is zero. Moreover,
$$
\Abs{\frac{F(Q)}{\abs{Q}}-\frac{F_k(Q)}{\abs{Q}}}\leq\frac{1}{\abs{Q}}\int_Q\abs{f-C_k}\leq M(f-C_k)(x),
$$
and therefore, the first term on the right is majorized by $M(f-C_k)(x)$. Hence, for every $k$,</p>
<p hidden>
\limsup_{Q\searrow x}\Abs{\frac{F(Q)}{\abs{Q}}-f(x)}\leq M(f-C_k)(x)+\abs{f(x)-C_k(x)}.
</p><script>eq("LDTI1")</script>
<p>Given $\varepsilon>0$, let $E_\varepsilon$ be the set on which the left side of (<script>ref("LDTI1");</script>) exceeds $\varepsilon$. By (<script>ref("LDTI1");</script>),
$$
E_\varepsilon\subseteq\left\{x:M(f-C_k)(x)>\frac{\varepsilon}{2}\right\}\cup\left\{x:\abs{f(x)-C_k(x)}>\frac{\varepsilon}{2}\right\}.
$$
Applying (<script>ref("HDLW");</script>) to thie first set on the right and () to the second, we obtain
$$
\abs{E_\varepsilon}_e\leq c\frac{\varepsilon}{2}^{-1}\int_{\mathbf{R}^n}\abs{f-C_k}+\frac{\varepsilon}{2}^{-1}\int_{\mathbf{R}^n}\abs{f-C_k}.
$$
Since $c$ is independent of $k$, it follows by letting $k\to\infty$ that $\abs{E_\varepsilon}_e=0$. Let $E$ be the set where the left side of (<script>ref("LDTI1");</script>) is positive. Then $E=\bigcup_kE_{\varepsilon_k}$ for any sequence $\varepsilon_k\to 0$, and therefore $\abs{E}=0$. This means that $\lim_{Q\searrow x}F(Q)/\abs{Q}$ exists and equals $f(x)$ for almost every $x$, which completes the proof.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> A measurable function $f$ defined on $\mathbf{R}^n$ is said to be <em style="color: teal;">locally integrable</em> on $\mathbf{R}^n$ if it is integrable over every bounded measurable subset of $\mathbf{R}^n$. This is easily seen to be equivalent to the integrability of $f$ over every compact set.
</div>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"LLDT"})
</script><em> The conclusion of Lebesgue's theorem is valid if, instead of being integrable, $f$ is locally integrable on $\mathbf{R}^n$.
</em></div>

<p class="proof"><em>Proof.</em> It is enough to show that the conclusion holds a.e. in every open ball. Fix a ball and replace $f$ by zero outside it. This new function is integrable over $\mathbf{R}^n$, its integral is differentiable a.e., and since differentiability is a locally property, the initial function $f$ is differentiable a.e. in the ball. This completes the proof.
<span style="float:right;">$\square$</span></p>

<p>
For any measurable $E$, note that
$$
\frac{1}{\abs{Q}}\int_Q\chi_E=\frac{\abs{E\cap Q}}{\abs{Q}}.
$$
By (<script>ref("LLDT");</script>), the left-hand side tends to $\chi_E(x)$ a.e. as $Q\searrow x$, that is,</p>
<p hidden>
\lim_{Q\searrow x}\frac{\abs{E\cap Q}}{\abs{Q}}=\chi_E(x)\quad\text{a.e.}
</p><script>eq("PODOE")</script>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $E$ be a measurable set in $\mathbf{R}^n$. A point $x\in\mathbf{R}^n$ for which the limit (<script>ref("PODOE");</script>) is $1$ is called a <em style="color: teal;">point of density</em> of $E$, and a point for which it is zero is called a <em style="color: teal;">point of despersion</em> of $E$.
</div>

<div class="alert alert-info">
<script >
theorem("Theorem")
</script><em> Let $E$ and $E'$ be a measurable sets. Then</em>
<ol class="parenthesis" style="font-style: italic;">
    <li>almost every point of $E$ is a point of density of $E$;</li>
    <li>$x$ is a point of density of $E$ if and only if $x$ is a point of desperation of $E$;</li>
    <li>if $x$ is a point of density of $E$ and $E'$ then $x$ is a point of density of $E\cap E'$.</li>
</ol>
</div>

<p class="proof"><em>Proof.</em> For (i), see (<script>ref("PODOE");</script>). For (ii), note that $\abs{E\cap Q}=\abs{Q}-\abs{E^c\cap Q}$ and so $$\frac{\abs{E\cap Q}}{\abs{Q}}=1-\frac{\abs{E^c\cap Q}}{\abs{Q}}.$$ For (iii), to show that $x$ is a point of density of $E\cap E'$, we prove that $x$ is a point of desperation of $E^c\cup E'^c$. But
$$
\lim_{Q\searrow x}\frac{\abs{(E^c\cup E'^c)\cap Q}}{\abs{Q}}\leq\lim_{Q\searrow x}\frac{\abs{E^c\cap Q}}{\abs{Q}}+\lim_{Q\searrow x}\frac{\abs{E'^c\cap Q}}{\abs{Q}}=0.
$$
<span style="float:right;">$\square$</span></p>

<p>
The formula $$\lim_{Q\searrow x}\frac{1}{\abs{Q}}\int_Qf(y)dy=f(x)$$ can be written
$$
\lim_{Q\searrow x}\frac{1}{\abs{Q}}\int_Qf(y)-f(x)dy=0
$$
and is valid for almost every $x$ if $f$ is locally integrable. This suggests the more stronger statement:
</p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $f$ be integrable. A point $x$ satisfies
$$
\lim_{Q\searrow x}\frac{1}{\abs{Q}}\int_Q\abs{f(y)-f(x)}dy=0
$$
is valid is called a <em style="color: teal;">Lebsgue point</em> of $f$, and the collection of all such points is called the <em style="color: teal;">Lebesgue set</em> of $f$.
</div>

<div class="alert alert-info">
<script >
theorem("Theorem")
</script><em> Let $f$ be locally integrable in $\mathbf{R}^n$. Then almost every point of $\mathbf{R}^n$ is a Lebesgue point of $f$.
</em></div>

<p class="proof"><em>Proof.</em> Let $\{r_k\}$ be the rational numbers, and let $Z_k$ be the set where the formula
$$
\lim_{Q\searrow x}\frac{1}{\abs{Q}}\int_Q\abs{f(y)-r_k}dy=\abs{f(x)-r_k}
$$
is not valid. Since $\abs{f(y)-r_k}$ is locally integrable, we have $\abs{Z_k}=0$. Let $Z=\bigcup Z_k$. Then $\abs{Z}=0$. For any $Q$, $x$ and $r_k$,
\begin{align}
\frac{1}{\abs{Q}}\int_Q\abs{f(y)-f(x)}dy&\leq\frac{1}{\abs{Q}}\int_Q\abs{f(y)-r_k}dy+\frac{1}{\abs{Q}}\int_Q\abs{f(x)-r_k}dy\\
&=\frac{1}{\abs{Q}}\int_Q\abs{f(y)-r_k}dy+\abs{f(x)-r_k}.
\end{align}
Therefore, if $x\notin Z$,
$$
\limsup_{Q\searrow x}\frac{1}{\abs{Q}}\int_Q\abs{f(y)-f(x)}dy\leq 2\abs{f(x)-r_k}
$$
for every $r_k$. For $x$ at which $f(x)$ is finite (in particular, almost everwhere), we can choose $r_k$ such that $\abs{f(x)-r_k}$ is arbitrarily small. This shows that the left side of the last formula is zero a.e. and completes the proof.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> A family $\{S\}$ of measurable sets is said to be <em style="color: teal;">shrink regularly</em> to $x$ provided that the diameters of the sets $S$ tends to zero and that if $Q$ is the smallest cube with center $x$ containing $S$, there is a constant $k$ independent of $S$ such that $\abs{Q}\leq k\abs{S}$. nThe sets $S$ need not contain $x$.
</div>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"SLDT"})
</script><em> Let $f$ be locally integrable in $\mathbf{R}^n$. Then at every point $x$ of the Lebesgue set of $f$ (in particular, almost everywhere),
$$
\frac{1}{\abs{S}}\int_S\abs{f(y)-f(x)}dy\to 0
$$
for any family $\{S\}$ that shrinks regularly to $x$. Thus, also
$$
\frac{1}{\abs{S}}\int_Sf(y)dy\to f(x)\quad\text{a.e.}
$$
</em></div>

<p class="proof"><em>Proof.</em> If $S\subseteq Q$, we have $$\int_Q\abs{f(y)-f(x)}dy\leq\int_Q\abs{f(y)-f(x)}dy.$$ Hence if $\{S\}$ shrinks regularly to $x$ and $Q$ is the least cube with center $x$ containing $S$, then $$\frac{1}{\abs{S}}\int_S\abs{f(y)-f(x)}dy\leq\frac{\abs{Q}}{\abs{S}}\frac{1}{\abs{Q}}\int_Q\abs{f(y)-f(x)}dy\leq k\frac{1}{\abs{Q}}\int_Q\abs{f(y)-f(x)}dy.$$ If $x$ is a Lebesgue point of $f$, the last expression tends to zero, and the theorem follows.
<span style="float:right;">$\square$</span></p>

<p>
In particular, for function $f$ of a single variable, we obtain
$$
\lim_{x\to 0}\frac{1}{h}\int_x^{x+h}f(y)dy=f(x)\quad\text{a.e.}
$$
</p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> A family $K$ of cubes is said to cover a set $E$ <em style="color: teal;">in the Vitali sense</em> if for every $x\in E$ and $\eta>0$, there is a cube in $K$ containing $x$ whose diameter is less than $\eta$.
</div>

<div class="alert alert-info">
<script >
theorem("Theorem",{"name":"Vitali Covering Lemma","label":"CVCL"}) 
</script><em> Suppose that $E$ is coverred in the Vitali sense by a family $K$ of cubes and that $\abs{E}_e&lt;\infty$. Then, given $\varepsilon>0$, there is a sequence $\{Q_j\}$ of disjoint cubes in $K$ such that $\abs{E-\bigcup_jQ_j}=0$ and $\sum_j\abs{Q_j}&lt;(1+\varepsilon)\abs{E}_e$.
</em></div>

<p class="proof"><em>Proof.</em> The second relation is automatically satisfied if we choose an open set $G$ containing $E$ with $\abs{G}&lt;(1+\varepsilon)\abs{E}_e$ and consider only those $Q$ in $K$ which lie in $G$. By (), there exists a constant $\beta$ dependin only on the dimension with $0&lt;\beta&lt;1$, and disjoint $Q_1,\ldots,Q_{N_1}$ in $K$ such that $\sum_{j=1}^{N_1}\abs{Q_j}>\beta\abs{E}_e$. Therefore
$$\Abs{E-\bigcup_{j=1}^{N_1}Q_j}_e\leq\Abs{G-\bigcup_{j=1}^{N_1}Q_j}=\abs{G}-\sum_{j=1}^{N_1}\abs{Q_j}&lt;\abs{E}_e(1+\varepsilon-\beta).$$
Hence, by considering from the start only those $\varepsilon$ with $0&lt;\varepsilon&lt;\beta/2$, we have $$\Abs{E-\bigcup_{j=1}^{N_1}Q_j}_e&lt;\abs{E}_e(1-\frac{\beta}{2}).$$ Thus, the part of $E$ not covered by the cubes obtained from the simple Vitali lemma has outer measure less than $\abs{E}_e(1-\beta/2)$. We now repeat the process for the set $E_1=E-\bigcup_{j=1}^{N_1}Q_j$, which is still covered in the Vitali sense y those cubes in $K$ that are disjoint from $Q_1,\ldots,Q_{N_1}$. We obtain $Q_{N_1+1},\ldots,Q_{N_2}$, disjoint from each other and from $Q_1,\ldots,Q_{N_1}$, such that
$$\Abs{E-\bigcup_{j=1}^{N_2}Q_j}_e=\Abs{E_1-\bigcup_{j=N_1+1}^{N_2}Q_j}_e&lt;\abs{E_1}_e(1-\frac{\beta}{2}))&lt;\abs{E}_e(1-\frac{\beta}{2})^2.$$
Continuing in this way, we obtain at the $m$-th stage disjoint $Q_1,\ldots,Q_{N_m}$ in $K$ such that $$\Abs{E-\bigcup_{j=1}^{N_m}Q_j}_e&lt;\abs{E}_e(1-\frac{\beta}{2})^m.$$ Since $(1-\beta/2)^m\to 0$ a  $m\to\infty$, there is a sequence of disjoint cubes in $K$ with the desired properties.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Corollary",{"label":"VCLC"})
</script><em> Suppose that $R$ is covered in the Vitali sense by a family $K$ of cubes and $0&lt;\abs{E}_e&lt;\infty$. Then, given $\varepsilon>0$, there is a finite collection $Q_1,\ldots,Q_N$ of disjoint cubes in $K$ such that $$\abs{E-\bigcup_{j=1}^NQ_j}&lt;\varepsilon$$ and</em>
<p hidden>
\sum_{j=1}^N\abs{Q_j}&lt;(1+\varepsilon)\abs{E}_e.
</p><script>eq("VCLC1")</script>
<em>In particular, we have</em>
<p hidden>
\abs{E}_e-\varepsilon&lt;\abs{E\cap\bigcup_{j=1}^NQ_j}_e
</p><script>eq("VCLC2")</script>
<em>and</em>
<p hidden>
\abs{E}_e-\varepsilon&lt;\sum_{j=1}^N\abs{Q}_j.
</p><script>eq("VCLC3")</script>
</div>

<p class="proof"><em>Proof.</em> (<script>ref("VCLC1");</script>) follows from the proof of (<script>ref("CVCL");</script>). By (), $$\abs{E}_e=\abs{E-\bigcup_{j=1}^NQ_j}+\abs{E\cap\bigcup_{j=1}^NQ_j}_e$$ so that (<script>ref("VCLC2");</script>) and (<script>ref("VCLC3");</script>) follows.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> If $f(x)$, $x\in\mathbf{R}$ is a real-valued function defined and finite in a neighborhood of $x_0$, consider the four <em style="color: teal;">Dini derivatives</em>
\begin{align}
D_1f(x_0)=\limsup_{h\to 0^+}\frac{f(x_0+h)-f(x_0)}{h},\\
D_2f(x_0)=\liminf_{h\to 0^+}\frac{f(x_0+h)-f(x_0)}{h},\\
D_3f(x_0)=\limsup_{h\to 0^-}\frac{f(x_0+h)-f(x_0)}{h},\\
D_4f(x_0)=\liminf_{h\to 0^-}\frac{f(x_0+h)-f(x_0)}{h}.
\end{align}
Clearly, $D_2f\leq D_1f$ adn $D_4f\leq D_3f$. If all four Dini derivatives are equal, that is, if $$\lim_{h\to 0}\frac{f(x_0+h)-f(x_0)}{h}$$ exists, finite or infinite, we say that $f$ has a <em style="color: teal;">derivative</em> at $x_0$ and call the common value the <em style="color: teal;">derivative</em> $f'(x_0)$ at $x_0$. Thus, $-\infty\leq f'(x_0)\leq\infty$ if $f'(x_0)$ exists.
</div>

<div class="alert alert-info">
<script >
theorem("Theorem")
</script><em> Let $f$ be monotone increasing and finite on an open interval $(a,b)\subseteq\mathbf{R}$. Then $f$ has a measurable, nonnegative,finite derivative $f'$ almost everywhere in $(a,b)$. Moreover, </em><p hidden>
0\leq\int_a^bf'\leq f(b^-)-f(a^+).
</p><script>eq("MDTI")</script>
</div>

<p class="proof"><em>Proof.</em> We may assume that $(a,b)$ is finite; the general case follows from this by passage to the limit. We will show that the set $$x\in(a,b):D_1f(x)>D_4f(x)\}$$ has measure zero. A similar argument will apply to any two Dini numbers of $f$. It is enough to show that each set $$A_{r,s}=\{x\in(a,b):D_1f(x)>r>s>D_4f(x)\}$$ has measure zero since the original set sis the union of these over rational $r$ and $s$. We may assume $r,s>0$ since $f$ is increasing. Fix $r$ and $s$ with $r>s>0$, write $A=A_{r,s}$, and suppose that $\abs{A}_e>0$. If $x\in A$, the fact that $D_4f(x)&lt;s$ implies the existence of arbitrarily small $h>0$ such that</p>
<p hidden>
\frac{f(x-h)-f(x)}{h}&lt;s.
</p><script>eq("MDTE1")</script>
<p>Given $\varepsilon$, by (<script>ref("VCLC");</script>) there exist disjoint intervals $[x_j-h_j,x_j]$ for $j=1,\ldots,N$ such that</p>
<ol class="parenthesis">
    <li>by (<script>ref("MDTE1");</script>), $f(x_j)-f(x_j-h_j)&lt;sh_j$;</li>
    <li>by (<script>ref("VCLC2");</script>), $\abs{A\cap\bigcup_{j=1}^N[x_j-h_j,x_j]}_e>\abs{A}_e-\varepsilon$;</li>
    <li>by (<script>ref("VCLC1");</script>), $\sum_{j=1}^Nh_j&lt;(a+\varepsilon)\abs{A}_e$.</li>
</ol>
<p>Combining (i) and (iii), we obtain</p>
<p hidden>
\sum_{j=1}^Nf(x_j)-f(x_j-h_j)&lt;s(1+\varepsilon)\abs{A}_e.
</p><script>eq("MDTE2")</script>
<p>Let $B=A\cap\bigcup_{j=1}^N[x_j-h_j,x_j]$. By (ii), $\abs{B}_e>\abs{A}_e-\varepsilon$. For every $y\in B$ that is not an endpoint of some $[x_j-h_j,x_j]$, the fact that $D_1f(y)>r$ implies that there exist arbitrarily small $k>0$ such that $[y,y+k]$ lies in some $[x_j-h_j,x_j]$ and</p>
<p hidden>
\frac{f(y+k)-f(y)}{k}>r.
</p><script>eq("MDTE3")</script>
<p>Hence by (<script>ref("VCLC");</script>) there exist dsijoint intervals $[y_i,y_i+k_i]$ lies in some $[x_j-h_j,x_j]$ for $i=1,\ldots,M$ such that</p>
<ol class="parenthesis" style="counter-reset: listcounter 3;">
    <li>by (<script>ref("MDTE3");</script>), $f(y_i+k_i)-f(y_i)>rk_i$;</li>
    <li>by (<script>ref("VCLC1");</script>), $\sum_{i=1}^Mk_i>\abs{B}_e-\varepsilon>\abs{A}_e-2\varepsilon$.</li>
</ol>
<p>Therefore</p>
<p hidden>
\sum_{i=1}^M[f(y_i+k_i)-f(y_i)>r(\abs{A}_e-2\varepsilon)
</p><script>eq("MDTE4")</script>
<p>Since $f$ is increasing and $[y_i,y_i+k_i]$ lies in some $[x_j-h_j,x_j]$,
$$
\sum_{i=1}^Mf(y_i+k_i)-f(y_i)\leq\sum_{j=1}^Nf(x_j)-f(x_j-h_j).
$$
Combining this inequality with (<script>ref("MDTE3");</script>) and (<script>ref("MDTE4");</script>), we obtain
$$
r(\abs{A}_e-2\varepsilon)&lt;s(1+\varepsilon)\abs{A}_e.
$$
Since $\varepsilon>0$ is arbitrary, this gives $r\leq s$, which is a contradiction. Hence $\abs{A}_e=0$. Since an anlogous argument applies to any two Dini derivatives, it follows that $f'(x)$ exists for almost every $x$ in $(a,b)$. Extend the definition of $f$ to $(a,\infty)$ by setting $f(x)=f(b^-)$ for $x\geq b$, and let
$$
f_k(x)=\frac{f(x+h)-f(x)}{h},\quad h=\frac{1}{k}
$$
for $x\in(a,b)$ and $k\in\mathbf{N}$. Each $f_k$ is non-negative an measurable, and $f_k\to f'$ a.e. in $(a,b)$. Hence $f'$ is measurable on $(a,b)$, and by (), $\int_a^bf'\leq\liminf_{k\to\infty}\int_a^bf_k$. Now we may assume $f(b^-)$ is finite as otherwise (<script>ref("MDTI");</script>) is obvious. We have
$$
\int_a^bf_k=\frac{1}{h}\int_{a+h}^{b+h}f-\frac{1}{h}\int_a^bf=\frac{1}{h}\int_b^{b+h}f-\frac{1}{h}\int_a^{a+h}f=f(b^-)-\frac{1}{h}\int_a^{a+h}f.
$$
Since $f(a^+)\leq(1/h)\int_a^{a+h}f\leq f(a+h)$, the limit in the right-hand side of the equality exists, and we obtain
$$
\int_a^bf'\leq\liminf_{k\to\infty}\int_a^bf_k=\lim_{k\to\infty}\int_a^bf_k=f(b^-)-f(a^+),
$$
which proves (<script>ref("MDTI");</script>). It remaind to show that $f'$ is finite a.e. in $(a,b)$. This follows from (<script>ref("MDTI");</script>) if $f(b^-)-f(a^+)&lt;\infty$ since then $f'\in L(a,b)$. Since $f$ is finite on $(a,b)$, it follows in any case by applying (<script>ref("MDTI");</script>) to a sequence of intervals $(a_k,b_k)$ in creasing to $(a,b)$, $a&lt;a_k&lt;b_k&lt;b$, and the proof is complete.
<span style="float:right;">$\square$</span></p>

<p>
We shall return in (<a href=#ACDT></a>) to the question of equality in (<script>ref("MDTI")</script>).
</p>

<div class="alert alert-info">
<script >
theorem("Corollary",{"label":"BVID"})
</script><em> If $f$ is of bounded variation on $[a,b]$, then $f'$ exists a.e. in $[a,b]$, and $f'\in L[a,b]$.
</em></div>

<p>
If $f$ is of bounded variation on $[a,b]$ and $V(x)$ denotes its total variation on $[a,x]$, $a\leq x\leq b$, then $V$ is monotone increasing by (). The next result gives an important relation between $V$ and $f'$.
</p>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"BVDT"})
</script><em> If $f$ is of bounded variation on $[a,b]$ and $V(x)$ is the variation of $f$ on $[a,x]$, $a\leq x\leq v$, then $V'(x)=\abs{f'(x)}$ for a.e. $x\in[a,b]$.
</em></div>

<p>
We will prove this with the help of the next lemma, which is of independent interest.
</p>

<div class="alert alert-info">
<script >
theorem("Lemma",{"name":"Fubini","label":"FLOS"})
</script><em> Let $\{f_k\}$ be a sequence of montone increasing functions on $[a,b]$. If the series $s(x)=\sum f_k(x)$ converges on $[a,b]$ (equivalently, if $s(a)$ and $s(b)$ are finite), then $s'(x)=\sum f_k'(x)$ a.e. in $[a,b]$. In particular, $f_k'\to 0$ a.e. in $[a,b]$.
</em></div>

<p class="proof"><em>Proof.</em> Let $s_m=\sum_{k=1}^mf_k$ and $r_m=\sum_{k=m+1}^\infty f_k$. Then $s_m$ and $r_m$ are monotone increasing functions and $s=s_m+r_m$. With the exception of a set $Z_m$ with $\abs{Z_m}=0$, there three functions together with $f_1,\ldots,f_m$ are differentiable and $s'=s_m+r_,'$. In particular, $s'\geq s_m'=\sum_{k=1}^mf_k'$ except in $Z_m$. It follows that $$s_m'\leq\sum_{k=1}^\infty f_k'\leq s'=s_m'+r_m'$$ except in $Z=\bigcup_{m=1}^\infty Z_m$. To prove that $\sum_{k=1}^\infty f_k'=s'$ a.e., it is enough to show that $r_,'\to 0$ a.e. for $m$ running through a seqeunce of stricrtly increasing values $\{m_j\}$. Since $r_m\searrow 0$ a.e., we can select $\{m_j\}$ increasing so rapidly that $\sum r_{m_j}(x)$ converges at both $x=a$ and $x=b$. This implies the convergence of $\sum_jr_{m_j}(b)-r_{m_j}(a)$ and also, in view of the monotonicity of $r_{m_j}$, of $\sum_jr_{m_j}(b^-)-r_{m_j}(a^+)$. By (<script>ref("MDTI");</script>), we have
$$
0\leq\int_a^b\sum r'_{m_j}=\sum\int_a^br'_{m_j}\leq\sum r_{m_j}(b^-)-r_{m_j}(a^+).
$$
Thus $\sum r'_{m_j}$ is integrable over $(a,b)$ and therefore, it is finite a.e. in $(a,b)$. Thus $r'_{m_j}\to 0$ a.e., and the proof is complete.
<span style="float:right;">$\square$</span></p>

<p class="proof"><em>Proof of <span style="font-style: normal;">(<script>ref("BVDT");</script>)</span>.</em> Let $f$ be of bounded variation on $[a,b]$ and let $V(x)=V([a,x]$ be its variation on $[a,x]$, $a\leq x\leq b$. Then $V(a)=0$ and $V(b)$ is the variation of $f$ on $[a,b]$. Select a sequence $\{\Gamma_k:\Gamma_k=\{x_j^k\}\}$ of partitions of $[a,b]$ such that $0\leq V(b)-S_{\Gamma_k}&lt;2^{-k}$, where $S_{\Gamma_k}=\sum_j\abs{f(x_j^k)-f(x_{j-1}^k)}$. For each $k$, define a function $f_k$ on $[a,b]$ as follows: if $x\in[x_{j-1}^k,x_j^k]$, let
$$
f_k(x)=\begin{cases}
f(x)+c_j^k&\text{ if }f(x_j^k)\geq f(x_{j-1}^k),\\
-f(x)+c_j^k&\text{ if }f(x_j^k)&lt;f(x_{j-1}^k),
\end{cases}
$$
where the $c_j^k$ are constants chosen so that $f_k(a)=0$ and $f_k$ is well-defined at $x_j^k$ for every $j$. Then for all $k$ and $j$,
$$
f_k(x_j^k)-f_k(x_{j-1}^k)=\abs{f(x_j^k)-f(x_{j-1}^k)}
$$
so that
$$
S_{\Gamma_k}=\sum_jf_k(x_j^k)-f_k(x_{j-1}^k)=f_k(b).
$$
Hence for any $k$, we obtain $0\leq V(b)-f_k(b)&lt;2^{-l}$. We will show that each $V(x)-f_k(x)$ is an increasing function of $x$. This amounts to showing that if $x&lt;y$, then $f_k(y)-f_k(x)\leq V(y)-V(x)$. If $x$ and $y$ both belong to the same partitioning interval of $\Gamma_k$, then $f_k(y)-f_k(x)\leq\abs{f(y)-f(x)}$ and therefore
$$
f_k(y)-f_k(x)\leq V[x,y]=V(y)-V(x).
$$
In the general case, if $x_l^k,x_{l+1}^k,\ldots,x_m^k$ are the points of $\Gamma_k$ between $x$ and $y$, the result follows by adding the inequalities for the intervals $[x,x_l^k],[x_l^k,x_{l+1}^k],\ldots,[x_m^k,y]$. Since $V(a)=f_k(a)=0$ and $V(b)-f_k(b)&lt;2^{-k}$, it follows that $0\leq V(x)-f_k(x)&lt;2^{-k}$ for all L$x\in[a,b]$. Hence
$$
\sum_k V(x)-f_k(x)&lt;\sum 2^{-k}&lt;\infty
$$
for $x\in[a,b]$ so that by (<script>ref("FLOS");</script>), the series $\sum_k V'(x)-f_k'(x)$ converges a.e. in $[a,b]$. Hence $f_k'\to V'$ a.e. However, $\abs{f_k'}=\abs{f'}$ a.e. so that $\abs{f'}=\abs{V'}$ a.e. The theorem now follows from the fact that $V'$ is a non-negative whenever it exists.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> A finite function $f$ on a finite interval $[a,b]$ is said to be <em style="color: teal;">absolutely continuous</em> on $[a,b]$ if given $\varepsilon>0$, there exists $\delta>0$ such that for any collection $\{[a_i,b_i]\}$ of non-overlapping subintervals of $[a,b]$, $\sum\abs{f(b_i)-f(a_i)}&lt;\varepsilon$ if $\sum(b_i-a_i)&lt;\delta$.
</div>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"IIIA2"})
</script><em> If $g$ is integrable on $[a,b]$ and $f(x)=\int_a^xg$ for $a\leq x\leq b$, then $f(x)$ is absolutely continuous.
</em></div>

<p class="proof"><em>Proof.</em> For any non-overlapping intervals $[a_i,b_i]$,
$$
\sum\abs{f(b_i)-f(a_i)}\leq\int_{\bigcup_i[a_i,b_i]}\abs{g}.
$$
By (<script>ref("IIIA1");</script>), $\int_E\abs{g}$ is an absolutely continuous set function and therefore $f$ is an absolutely continuous function on $[a,b]$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"ACIB"})
</script><em> If $f$ is absolutely continuous on $[a,b]$, then it is of bounded variation on $[a,b]$.
</em></div>

<p class="proof"><em>Proof.</em> Choose $\delta$ so that $\sum\abs{f(b_i)-f(a_i)}\leq 1$ for any collection of non-overlapping intervals with $\sum(b_i-a_i)\leq\delta$. Then the variation of $f$ over any subinterval of $[a,b]$ with length less than $\delta$ is at most $1$. Hence if we split $[a,b]$ into $N$ intervals each with length less than $\delta$, then $V[a,b]\leq N$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> A function $f$ for which $f'$ is zero a.e. in $[a,b]$ is said to be <em style="color: teal;">singular</em> on $[a,b]$.
</div>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"ACSC"})
</script><em> If $f$ is both absolutely continuous and singular on $[a,b]$, then it is constant on $[a,b]$.
</em></div>

<p class="proof"><em>Proof.</em> It is enough to show that $f(a)=f(b)$ since this result aplied to any subinterval proves that $f$ is constant. Let $E$ be the subset of $(a,b)$ where $f'=0$, so that $\abs{E}=b-a$. Given $\varepsilon>0$ and $x\in E$. Given $\varepsilon>0$ and $x\in E$, we have $[x,x+h]\subseteq (a,b)$ and</p>
<p hidden>
\abs{f(x+h)-f(x)}&lt;\varepsilon h
</p><script>eq("ACSE")</script>
<p>for all sufficiently small $h>0$. Let $\delta$ be the number corresponding to $\varepsilon$ in the definition of the absolute continuity of $f$. By (<script>ref("CVCL");</script>), there exists disjoint $Q_j=[x_j,x_j+h_j]\subseteq (a,b)$ for $j=1,\ldots,N$ such that</p>
<ol class="parenthesis">
    <li>by (<script>ref("ACSE");</script>), $\abs{f(x_j+h_j)-f(x_j)}&lt;\varepsilon h_j$;</li>
    <li>by (<script>ref("VCLC3");</script>), $\sum_{j=1}^N\abs{Q_j}>(b-a)-\delta$.</li>
</ol>
<p>By (i), $\sum_{j=1}^N\abs{f(x_j+h_j)-f(x_j)}&lt;\varepsilon\sum_{j=1}^N\abs{Q_j}\leq\varepsilon(b-a)$. Moreover, since by (ii) the total length of the complementary intervals is less than $\delta$, the sum of the absolute values of the increments of $f$ over them is less than $\varepsilon$. Thus the sum of the absolute values of the increments of $f$ over the $Q_j$ and the complementary intervals is less than $\varepsilon(b-a)+\varepsilon$. Hence $\abs{f(b)-f(a)}&lt;\varepsilon(b-a)+\varepsilon$, so that $f(b)-f(a)$. This compltes the proof.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"ACDT"})
</script><em> A function $f$ is absolutely continuous on $[a,b]$ if and only if $f'$ exists a.e. in $[a,b]$, $f'$ is integrable on $[a,b]$, and
$$
f(x)-f(a)=\int_a^xf',\quad a\leq x\leq b.
$$
</em></div>

<p class="proof"><em>Proof.</em> By (<script>ref("IIIA2");</script>), any function of the form $G(x)=\int_a^xg$, $g\in L[a,b]$, is absolutely continuous on $[a,b]$. Hence the sufficiency part of the theorem follows. Conversely, if $f$ is absolutely continuous, let $F(x)=\int_a^xf'$. $F$ is well-defined by virtue of (<script>ref("ACIB");</script>) and (<script>ref("BVID");</script>). Moreover, by (<script>ref("SLDT");</script>), $F'=f'$ a.e. in $[a,b]$. It follows that $F(x)-f(x)$ is both absolutely continuous and singular on $[a,b]$. Hence, by (<script>ref("ACSC");</script>), we obtain $F(x)-f(x)=F(a)-f(a)$ for $x\in[a,b]$. Since $F(a)=0$, the proof is complete.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Theorem")
</script><em> If $f$ is of bounded variation on $[a,b]$, then $f$ can be written $f=g+h$, where $g$ is absolutely continuous on $[a,b]$ and $h$ is singular on $[a,b]$. Moreover, $g$ and $h$ are unique up to additive constants.
</em></div>

<p class="proof"><em>Proof.</em> Let $g(x)=\int_a^xf'$ and $h=f-g$. Then $h'=f'-g'=f'-f'=0$ a.a. in $[a,b]$, so that $h$ is singular, and the fomrula $f=g+h$ gives the desired decomposition. If $f=g_1+h_1$ is another such decomposition, then $g-g_1=h_1-h$. Since $g-g_1$ is absolutely continuous and $h_1-h$ is singular, it follows from (<script>ref("ACSC");</script>) that $g-g_1=h_1-h$ is constant, which completes the proof.
<span style="float:right;">$\square$</span></p>

<p>
Here is an analogue of ().
</p>

<div class="alert alert-info">
<script >
theorem("Theorem")
</script><em> Let $f$ be absolutely continuous on $[a,b]$ and let $V(x)$, $P(x)$ and $N(x)$ denote its total, positive, and negative variations on $[a,x]$, $a\leq x\leq b$. Then $V$, $P$ and $N$ are absolutely continuous on $[a,b]$, and
$$
V(x)=\int_a^x\abs{f'},\quad P(x)=\int_a^x(f')^+,\quad N(x)=\int_a^x(f')^-.
$$
</em></div>

<p class="proof"><em>Proof.</em> We will fist show that $V$ is absolutely continuous. If $[\alpha,\beta]$ is a subinterval of $[a,b]$ and $\Gamma=\{x_k\}$ is a partition of $[\alpha,\beta]$, then by (<script>ref("ACDT");</script>),
$$
V(\beta)-V(\alpha)=V[\alpha,\beta]=\sup_\Gamma\sum\abs{f(x_k)-f(x_{k-1})}=\sup_\Gamma\sum\Abs{\int_{x_{k-1}}^{x_k}f'}\leq\int_\alpha^\beta\abs{f'}.
$$
Hence if $\{[\alpha_i,\beta_i]\}$ is a collection of non-overlapping subintervals of $[a,b]$, then
$$
\sum_iV(\beta_i)-V(\alpha_i)\leq\int_{\bigcup_i[\alpha_i,\beta_i]}\abs{f'}.
$$
From this inequality and (<script>ref("IIIA1");</script>), it follows that $V$ is absolutely continuous on $[a,b]$. Therefore by (<script>ref("ACDT");</script>) and the fact that $V(a)=0$, we have $V(x)=\int_a^xV'$. Since $V'=\abs{f'}$ a.e. by (<script>ref("BVDT");</script>), we obtain $V(x)=\int_a^x\abs{f'}$, as desired. The fact that $P$ and $N$ are absolutely continouous and the formulas for $P$ and $N$ now follow from the relations
$$
V(x)=\int_a^x\abs{f'},\quad f(x)=f(a)+\int_a^xf'
$$
and
$$
\quad P(x)=\frac{1}{2}(V(x)+f(x)-f(a)),\quad N(x)=\frac{1}{2}(V(x)-f(x)+f(a)),
$$
see (). This completes the proof.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Theorem",{"name":"Integration by Parts"})
</script>
<ol class="parenthesis" style="font-style: italic;">
<li>If $g$ is continuous on $[a,b]$ and $f$ is absolutely continuous on $[a,b]$, then
$$
\int_a^bgdf=\int_a^bgf'dx.
$$</li>
<li>If both $f$ and $g$ are absolutely continuous on $[a,b]$, then
$$
\int_a^bgf'dx=g(b)f(b)-g(a)f(a)-\int_a^bg'fdx.
$$
</li>
</ol>
</div>

<p class="proof"><em>Proof.</em> To prove (i), frist note that the integrals in the conlcusion exsit and are finite by () and (). Let $\Gamma=\{x_i\}$ be a partition of $[a,b]$ with norm $\abs{\Gamma}$. Then
$$
\int_a^bgf'=\sum\int_{x_{i-1}}^{x_i}gf'dx=\sum g(x_{i-1})\int_{x_{i-1}}^{x_i}f'(x)dx+\sum\left(\int_{x_{i-1}}^{x_i}g(x)-g(x_{i-1})\right)f'(x)dx.
$$
The first term on the right equals $\sum g(x_{i-1})(f(x_i)-f(x_{i-1}))$, which converges to $\int_a^bgdf$ as $\abs{\Gamma}\to 0$. The second term on the right is majorized in absolute value by
$$
\left(\sup_{\abs{x-y}\leq\abs{\Gamma}}\abs{g(x)-g(y)}\right)\sum\int_{x_{i-1}}^{x_i}\abs{f'}dx=\left(\sup_{\abs{x-y}\leq\abs{\Gamma}}\abs{g(x)-g(y)}\right)\int_a^b\abs{f'}dx.
$$
Since $g$ is uniformly continous on $[a,b]$, the last expression tends to $0$ as $\abs{\Gamma}\to 0$. This proves (i). We can easily deduce (ii) from (i) by using (). In fact, if $f$ and $g$ are absolutely continuous, then
\begin{align}
\int_a^bgf'dx&=\int_a^bgdf\\
&=g(b)f(b)-g(a)f(a)-\int_a^bfdg\\
&=g(b)f(b)-g(a)f(a)-\int_a^bfg'dx.
\end{align}
This proves (ii).
<span style="float:right;">$\square$</span></p>

</div>

<script>
    section("section","Classes")
</script>
<div class="collapse" id="content-classes">

<div class="alert alert-warning">
<script>
theorem("Definition")
</script> Let $E$ is a measurable subset of $\mathbf{R}^n$ and $f$ a measurable functino on $E$. The <em style="color: teal;">essential supremum</em> is defined by
<ol class="parenthesis">
<li> if $\abs{E}>0$ then $\esssup_Ef=\inf_\alpha\abs{\{\alpha:w(\alpha)=0\}}$.
</li>
<li>if $\abs{E}=0$ then $\esssup_Ef=0$.</li>
</ol>
Note that $\esssup_Ef=\infty$ if $\abs{E}>0$ but $w(\alpha)>0$ for all $\alpha$.
</div>

<div class="alert alert-info">
<script>
theorem("Proposition")
</script><em> $\esssup_Ef$ is the smallest number $M$ with $-\infty\leq M\leq\infty$ such that $f(x)\leq M$ e.a. on $E$.
</em></div>

<p class="proof"><em>Proof.</em> If $\abs{E}=0$ or $\esssup_Ef=\infty$ then the result is clearly. Since the distribution function $w(\alpha)$ is continuous from the right by (), it follows that $w(\esssup_Ef)=0$ if and only if $\esssup_Ef$ is finite, and the result follows.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script>
theorem("Definition")
</script> Let $E$ be a measurable subset of $\mathbf{R}^n$ and $p$ satisfies $0&lt;p\leq\infty$.
<ol class="parenthesis">
<li>If $p&lt;\infty$ then $$\norm{f}_p=\left(\int_E\abs{f}^p\right)^{1/p}.$$</li>
<li>If $p=\infty$ then $$\norm{f}_\infty=\esssup_E\abs{f}.$$</li>
</ol>
Denote $L^p(E)$ the class of measruable $f$ for which $\norm{f}_p$ is finite.
</div>

<div class="alert alert-info">
<script>
theorem("Theorem")
</script><em> If $\abs{E}>\infty$ then $\norm{f}_\infty=\lim_{p\to\infty}\norm{f}_p$.
</em></div>

<p class="proof"><em>Proof.</em> We may assume that $\abs{E}>0$ since $\norm{f}_\infty$ and $\norm{f}_p$ are both $0$ if $\abs{E}=0$. Let $M=\norm{f}_\infty$. If $M'&lt;M$, then the set
$$
A=\{x\in E:\abs{f(x)}>M'\}
$$
has positive measure. Moreover, $\norm{f}_p\geq(\int_A\abs{f}^p)^{1/p}\geq M'\abs{A}^{1/p}$. Since $\abs{A}^{1/p}\to 1$ as $p\to\infty$, it follows that $\liminf_{p\to\infty}\norm{f}_p\geq M'$ and therefore $\liminf_{p\to\infty}\norm{f}_p\geq M$. However, we also have $\norm{f}_p\leq(\int_EM^p)^{1/p}=M\abs{E}^{1/p}$. Hence $\limsup_{p\to\infty}\norm{f}_p\leq M$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script>
theorem("Theorem")
</script><em> Let $0&lt;p_1&lt;p_2\leq\infty$.</em>
<ol class="parenthesis" style="font-style: italic;">
<li>If $\norm{f}_\infty&lt;\infty$ then $L^{p_1}\subseteq L^{p_2}$.</li>
<li>If $\abs{E}&lt;\infty$ then $L^{p_2}\subseteq L^{p_2}$.</li>
</ol>
</div>

<div class="proof"><em>Proof.</em>
<ol class="parenthesis">
<li>Assume $f\in L^{p_1}$ with $\abs{f}\leq M$ a.e. on $E$ for some positive integer $M$. If $p_2=\infty$ then $\norm{f}_\infty\leq M&lt;\infty$. If $p_2&lt;\infty$ then note that
$$
\begin{align}
\int_A\abs{f}^{p_2}&=\int_{E_1}\abs{f}^{p_2}+\int_{E_2}\abs{f}^{p_2}\\
&\leq\abs{E_1}+\int_{E_2}\abs{f}^{p_2-p_1}\abs{f}^{p_1}\\
&\leq\abs{E}_1+\norm{f}_\infty^{p_2-p_1}\int_{E_2}\abs{f}^{p_1}\\
&\leq\abs{E_1}+M\int_{E_2}\abs{f}^{p_2}\\
&&lt;\infty.
\end{align}
$$
</li>
<li> Let $f\in L^{p_2}$ and assume $\abs{E}&lt;\infty$. If $p_2=\infty$ then $\int_E\abs{f}^{p_1}\leq\int_E\norm{f}_\infty^{p_1}=\norm{f}_\infty^{p_1}\abs{E}&lt;\infty$. If $p_2&lt;\infty$ then write $E=E_1\cup E_2$ where $E_1$ is the set where $\abs{f}\leq 1$ and $E_2$ the set where $\abs{f}>1$. Thus $\int_E\abs{f}^{p_1}=\int_{E_1}\abs{f}^{p_1}+\int_{E_2}\abs{f}^{p_1}\leq\abs{E_1}+\int_{E_2}\abs{f}^{p_2}&lt;\infty$.</li>
</ol>
<span style="float:right;">$\square$</span></div>

<div class="alert alert-info">
<script>
theorem("Theorem")
</script><em> If $0&lt;p&lt;\infty$ then $L^p(E)$ forms a real vector space.
</em></div>

<p class="proof"><em>Proof.</em> For any real number $c$ and  $f\in L^p(E)$, $\norm{cf}_p=\abs{c}\norm{f}_p$ clearly. Hence $cf\in L^p(E)$.  Given $f,g\in L^p(E)$,
$$
\abs{f+g}^p\leq(2\max\{\abs{f}\abs{g})^p\leq2^p(\abs{f}^p+\abs{g}^p).
$$
Hence $f+g\in L^p(E)$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script>
theorem("Theorem",{"name":"Young's Inquality","label":"YSIE"})
</script><em> Let $y=\phi(x)$ be continuous, real-valued, and strictly increasing for $x\geq 0$ and let $\phi(0)=0$. If $x=\psi(y)$ is the inverse of $\phi$, then for $a,b>0$,
$$
ab\leq\int_0^a\phi(x)dx+\int_0^b\psi(y)dy.
$$
Equality holds if and only if $b=\phi(a)$.
</em></div>

<div class="alert alert-warning">
<script>
theorem("Definition")
</script> If $1&lt;p&lt;\infty$ then define $p'=1/p$. If $p=1$ then $p'=\infty$, and if $p=\infty$ then $p'=1$. $p'$ is calle the <em style="color: teal;">conjugate</em> of $p$.
</div>

<div class="alert alert-info">
<script>
theorem("Corollary",{"label":"YSIEC"})
</script><em> if $a,b\geq 0$ and $1&lt;p&lt;\infty$, then
$$
ab\leq\frac{a^p}{p}+\frac{b^{p'}}{p'}.
$$
</em></div>

<p class="proof"><em>Proof.</em> If $\phi(x)=x^\alpha$, $\alpha>0$ then its admits the inverse $\psi(y)=y^{1/\alpha}$. Now (<script>ref("YSIE");</script>) becomes
$$
ab\leq\frac{a^{1+\alpha}}{1+\alpha}+\frac{b^{1+\frac{1}{\alpha}}}{1+\frac{1}{\alpha}}.
$$
Setting $p=\alpha+1$ and $p'=1+1/\alpha$, we obtain the desired inequality.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script>
theorem("Theorem",{"name":"Holder's Inequality","label":"HSIE"})
</script><em> If $1\leq p&lt;\infty$ then $\norm{fg}_1\leq\norm{f}_p\norm{g}_{p'}$, that is, if $1&lt;p&lt;\infty$ then
$$
\int_E\abs{fg}\leq\left(\int_E\abs{f}^p\right)^{1/p}\left(\int_E\abs{g}^{p'}\right)^{1/p'},
$$
and if $p=\infty$ then
$$
\int_E\abs{fg}\leq\left(\esssup_E\abs{f}\right)\int_E\abs{g}.
$$
</em></div>

<p class="proof"><em>Proof.</em> The last inequality, which corresponds to the case $p=\infty$, is obvious. Let us suppose then that $1&lt;p&lt;\infty$. In case $\norm{f}_p=\norm{g}_{p'}=1$, (<script>ref("YSIEC");</script>) implies that
$$
\int_E\abs{fg}\leq\int_E\left(\frac{\abs{f}^p}{p}+\frac{\abs{g}^{p'}}{p'}\right)
=\frac{\norm{f}_p^p}{p}+\frac{\norm{g}_{p'}^{p'}}{p'}
=\frac{1}{p}+\frac{1}{p'}
=1
=\norm{f}_p\norm{g}_{p'}.
$$
For the general case, we may assume that neither $\norm{f}_p$ nor $\norm{g}_{p'}$ is zero; otherwise, $fg$ is zero a.e. in $E$, and the result is immediate. We may also assume that neither $\norm{f}_p$ nor $\norm{g}_{p'}$ is infinite. If we set $f_1=f/\norm{f}_p$ and $g_1=g/\norm{g}_{p'}$, then $\norm{f_1}_p=\norm{g_1}=1$. Therefore, by the case already considered, we have $\int_E\abs{f_1g_1}\leq 1$, that is, $\int_E\abs{fg}\leq\norm{f}_p\norm{g}_{p'}$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script>
theorem("Theorem",{"label":"CHI"})
</script><em> Let $f$ be real-valued and measurable on $E$, and let $1\leq p\leq\infty$. Then</em>
<p hidden>
\norm{f}_p=\sup\int_Efg
</p><script>eq("CHIE")</script>
<em>where the supremum is taken overa all real-valued $g$ such that $\norm{g}_{p'}\leq 1$ and $\int_Efg$ exists.
</em></div>

<div class="proof"><em>Proof.</em> The left-hand side of (<script>ref("CHIE");</script>) is majorize the right-hand side follows from (<script>ref("HSIE");</script>). To show that opposite inequality, let us consider serveral cases:
<ol class="parenthesis">
<li>Assume $f\geq 0$ and $1&lt;p&lt;\infty$. If $\norm{f}_p=0$ then $f=0$ a.e. in $E$, and the result is obvious. If $0&lt;\norm{f}_p&lt;\infty$ we may further assume that $\norm{f}_p=1$ by dividing both sides of (<script>ref("CHIE");</script>) by $\norm{f}_p$. Now let $g=f^{p/p'}$. It is easy to verify that $\norm{g}_{p'}=1$ and $\int_Efg=1$, which completes the proof in this case. If $\norm{f}_p=\infty$, define functions $f_k$ on $E$ by setting
$$
f_k(x)=\begin{cases}
0&\text{ if }\abs{x}>k;\\
\min\{f(x),k\}&\text{ if }\abs{x}\leq k.
\end{cases}
$$
Then each $f_k$ belongs to $L^p$ and $\norm{f_k}_p\to\norm{f}_p=\infty$. By the case already considered, we have $\norm{f_k}_p=\int_Ef_kg_k$ for some $g_k\geq 0$ with $\norm{g_k}_{p'}=1$. Since $f\geq f_k$, it follows that $\int_Efg_k\geq\int_Ef_kg_k\to\infty$. This shows that
$$
\sup_{\norm{g}_{p'}=1}\int_Efg=\infty=\norm{f}_p.
$$
</li>
<li>Assume $f\geq 0$ and $p=\infty$. If $0&lt;\norm{f}_\infty&lt;\infty$ then we can assume $\norm{f}_\infty=1$ by the same reason as in case (i). For each positive inter $n$, define the set
$$
E_n=\{x\in E:f(x)>1-\frac{1}{n}\text{ and }\abs{x}&lt;n\},
$$
which satisfies $0&lt;\abs{E_n}&lt;\infty$. Define
$$
g_n(x)=\begin{cases}
0&\text{ if }x\notin E_n;\\
\displaystyle\frac{1}{E_n}&\text{ if }x\notin E_n.
\end{cases}
$$
Then $\int_{E_n}g_n=1$ so that $\norm{g}_1=1$ and $\int_Efg_n=\int_{E_n}fg_n\geq(1-1/n)\int_{E_n}g_n=1-1/n$. Hence $$\sup_{\norm{g}\leq 1}\int_Efg=1=\norm{f}_\infty.$$
For general case, if $\norm{f}_\infty=0$ then the result is clear, and if $\norm{f}_\infty=\infty$, that is, $w(\alpha)>0$ for all $\alpha$, then for each positive integer $n$, define
$$
F_n=\{x\in E:f(x)>n\}.
$$
For all $n$ large enough, say $n\geq N$, we have $0&lt;\abs{F_n}&lt;\infty$. Define
$$
g_n(x)=\begin{cases}
0&\text{ if }x\notin F_n;\\
\displaystyle\frac{1}{F_n}&\text{ if }x\notin F_n.
\end{cases}
$$
for $n\geq N$. Then $\int_{F_n}g_n=1$ so that $\norm{g}_1=1$ and $\int_Efg_n=\int_{F_n}fg_n\geq n\int_{F_n}g_n=n$ for all $n\geq N$. Hence $$\sup_{\norm{g}_\infty\leq 1}\int fg=\infty=\norm{f}_\infty.$$
</li>
<li> Assume $f\geq 0$ and $p=1$. Then we can choose $g=1$ so that $\norm{g}_\infty=1$ and clearly we have $\int_E fg=\norm{f}_1$.
</li>
<li> Assume $f$ is arbitrary and $1\leq p\leq\infty$. To dispose of the restriction $f\geq 0$, apply the result above to $\abs{f}$. Thus, there exists $g_k$ with $\norm{g_k}_{p'}=1$ such that
$$
\norm{f}_p=\lim\int_E\abs{f}g_l=\lim\int_Ef(g_k\sign f)
$$
Since $\norm{g_k\sign f}_{p'}=1$, the result follows.
</li>
</ol>
<span style="float:right;">$\square$</span></div>

<div class="theorem" data-name="name" data-label="label">
If $1\leq p\leq\infty$, then $\norm{f+g}_p\leq\norm{f}_p+\norm{g}_p$, that is, if $1\leq p\leq\infty$ then
$$
\left(\int_E\abs{f+g}^p\right)^{1/p}\leq\left(\int_E\abs{f}^p\right)^{1/p}+\left(\int_E\abs{g}^p\right)^{1/p},
$$
and if $p=\infty$ then
$$
\esssup_E\abs{f+g}\leq\esssup_E\abs{f}+\esssup_E\abs{g}.
$$
</div>

<div class="proof"> trivial.
</div>


</div>
</div>

<script>
    section("chapter","Functional Analysis")
</script>
<div class="collapse" id="content-functional-analysis">

<script>
    section("section","Hilbert Space")
</script>
<div class="collapse" id="content-hilbert-space">
<p>
Thorugh this chapter $\mathbf{F}$ will denote either the real field, $\mathbf{R}$ or the complex field $\mathbf{C}$.
</p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> If $V$ is a vector space over $\mathbf{F}$, a <em style="color: teal;">semi-inner</em> product on $V$ is a function $u:V\times V\to\mathbf{F}$ such that for all $\alpha,\beta$ in $\mathbf{F}$, and $x,y,z\in V$, the following are satisfies:
<ol class="parenthesis">
    <li>$u(\alpha x+\beta y,z)=\alpha u(x,z)+\beta u(y,z)$,</li>
    <li>$u(x,\alpha y+\beta z)=\overline{\alpha}u(x,y)+\overline{\beta}u(x,z)$,</li>
    <li>$u(x,x)\geq 0$,</li>
    <li>$u(x,y)=\overline{u(y,x)}$.</li>
</ol>
An <em style="color: teal;">inner product</em> on $V$ is a semi-innver product that also satisfies the following:
<ol class="parenthesis" style="counter-reset: listcounter 4;">
    <li>If $u(x,x)=0$ then $x=0$.</li>
</ol>
An inner product in this chapter will be denoted by $\langle x,y\rangle=u(x,y)$.
</div>
<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"CBSI", "name": "Cauchy–Bunyakovsky–Schwarz inequality"})
</script><em> $\langle\cdot,\cdot\rangle$ is a semi-inner product on $V$, then
$$
\vert\langle x,y\rangle\vert^2\leq\langle x,x\rangle\langle y,y\rangle
$$
for all $\alpha$ and $\beta$. Moreover, equality occurs if and only if ther are scalars $\alpha$ and $\beta$, both not $0$, such that $\langle\beta x,+\alpha y,\beta x+\alpha y\rangle=0$.
</em></div>

<p class="proof"><em>Proof.</em> If $\alpha\in\mathbf{F}$ and $x$ and $y\in V$, then
$$
0\leq\langle x-\alpha y,x-\alpha y\rangle=\langle x,x\rangle-\alpha\langle y,x\rangle-\overline{\alpha}\langle x,y\rangle+\vert\alpha\vert^2\langle y,y\rangle.
$$
Suppose $\langle y,x\rangle=be^{i\theta}$, $b\geq 0$, and let $\alpha=e^{-i\theta}t$, $t\in\mathbf{R}$. The above inequality becomes
\begin{align}
0&\leq\langle x,x\rangle-e^{-i\theta}tbe^{i\theta}-e^{i\theta}tbt^{-i\theta}+t^2\langle y,y\rangle\\
&=\langle x,x\rangle-2bt+t^2\langle y,y\rangle\\
&=c-2bt+at^2\\
&=:q(t),
\end{align}
where $c=\langle x,x\rangle$ and $a=\langle y,y\rangle$. Thus $q(t)$ is a quadratic polynomial in the real variable $t$ and $q(t)\geq 0$ for all $t$. This implies tha the quation $q(t)=0$ has at most one real solution $t$. From the equadratic formula we find that the discriminant is not positive; that is, $0\geq 2b^2-4ac$. Hence
$$
0\geq b^2-ac=\vert\langle x,y\rangle\vert^2-\langle x,x\rangle\langle y,y\rangle,
$$
proving the inequality. The proof of the necessary and sufficient condition is routine.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Corollary")
</script><em> If $\langle\cdot,\cdot\rangle$ is a semi-inner product on $V$ and $\Vert x\Vert:=\langle x,x\rangle^{1/2}$ for all $x\in V$, then</em>
<ol class="parenthesis" style="font-style: italic;">
    <li>$\Vert x+y\Vert\leq\Vert x\Vert+\Vert y\Vert$ for all $x,y\in V$,</li>
    <li>$\Vert\alpha x\Vert=\vert\alpha\vert\Vert x\Vert$ for all $\alpha\in\mathbf{F}$ and $x\in V$.</li>
</ol><em>
If $\langle\cdot,\cdot\rangle$ is an innre product, then
</em><ol class="parenthesis" style="counter-reset: listcounter 2;font-style: italic;">
    <li>$\Vert x\Vert=0$ implies $x=0$</li>
</ol></div>

<p class="proof"><em>Proof.</em> The proof of (ii) and (iii) are easy. To see (i), note that for $x$ and $y$ in $V$,
\begin{align}
\Vert x+y\Vert^2&=\langle x+y,x+y\rangle\\
&=\Vert x\Vert^2+\langle y,x\rangle+\langle x,y\rangle+\Vert y\Vert^2\\
&=\Vert x\Vert^2+2\Re\langle x,y\rangle+\Vert y\Vert^2.
\end{align}
By the (<script>ref("CBSI");</script>), $\Re\langle x,y\rangle\leq\vert\langle x,y\rangle\vert\leq\Vert x\Vert\Vert y\Vert$. Hence
\begin{align}
\Vert x+y\Vert^2&\leq\Vert x\Vert^2+2\Vert x\Vert y\Vert y\Vert+\Vert y\Vert^2\\
&=(\Vert x\Vert+\Vert y\Vert)^2.
\end{align}
The inequality now follows by taking square roots.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"L2HS"})
</script><em> $L^2(\mu)$ is a Hilbert space.
</em></div>

<p class="proof"><em>Proof.</em> Omitted.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> A <em style="color: teal;">Hilbert</em> space if a vector space $H$ over $\mathbf{F}$ togehter with an inner product $\langle\cdot,\cdot\rangle$ such that relative to the metric $d(x,y)=\Vert x-y\Vert$ induced by the norm, $H$ is a complete metric space.
</div>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> If $G$ is an open subset of the complex plane $\mathbf{C}$, then $L_a^2(G)$ denote the collection of all analytic functions $f:G\to\mathbf{}$ such that
$$
\Vert f\Vert_2:=\iint_G\vert f(x+iy)\vert^2dxdy&lt; \infty.
$$
$L^2_a(G)$ is called the <em style="color: teal;">Bergman space</em> for $G$.
</div>

<div class="alert alert-info">
<script >
theorem("Lemma")
</script><em> If $f$ is analytic in a neighborhood of $\overline{B}(a,r)$, then
$$
f(a)=\frac{1}{\pi r^2}\iint_{B(a,r)}f.
$$
</em></div>

<p class="proof"><em>Proof.</em> By the mean value property, of $0>t\leq r$ then
$$
f(a)=\frac{1}{2\pi}\int^\pi_{-\pi}f(a+te^{i\theta})d\theta
$$
Hence
\begin{align}
(\pi r^2)^{-1}\iint_{B(a,r)}f&=(\pi r^2)^{-1}\int_0^r\left[\int_{-\pi}^\pi f(a+te^{i\theta}d\theta)\right]dt\\
&=\frac{2}{r^2}\int_0^rtf(a)dt=df(a).
\end{align}
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Corollary")
</script><em> if $f\in L^2_a(G)$, $a\in G$, and $0&lt; r&lt; \dist(a,\partial G)$, then
$$
\vert f(a)\vert\leq\frac{1}{r\sqrt{\pi}}\Vert f\Vert_2
$$
</em></div>

<p class="proof"><em>Proof.</em> Since $\overline{B}(a,r)\subseteq G$, the preceding lemma and (<script>ref("CBSI");</script>) implies
\begin{align}
\abs{f(a)}&=\frac{1}{\pi r^2}\abs{\iint_{B(a,r)}f\cdot 1}\\
&\leq\frac{1}{\pi r^2}\left[\iint_{B(a,r)}\abs{f}^2\right]^{1/2}\left[\iint_{B(a,r)}1\right]^{1/2}\\
&\leq\dfrac{1}{\pi r^2}\norm{f}_2r\sqrt{\pi}.
\end{align}
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> $L^2_a(G)$ is a Hilbert space.
</em></div>

<p class="proof"><em>Proof.</em> $L^2a(G)\subseteq L^2(\mu)$ and $L^2(\mu)$ is a Hilbert space by (<script>ref("L2HS");</script>). It suffices to show that $L^2_a(G)$ is closed in $L^2(\mu)$. Let $\{f_n\}$ be a sequence in $L^2_a(G)$ and let $f\in L^2(\mu)$ such that $\int\abs{f_n-f}^2d\mu\to 0$ as $n\to\infty$. Suppose $\overline{B}(a,r)\subseteq G$ and let $0&lt; \rho&lt; \dist(B(a,r),\partial G)$. By the precedding corollary there is a constant $C$ such that $\abs{f_n(z)-f_m(z)}\leq C\norm{f_n-f_m}_2$ fro all $n,m$ and for $\abs{z-a}\leq \rho$. Thus $\{f_n\}$ is a uniformly Cauchy sequence on any closed disk in $G$. By () there is an analytic function $g$ on $G$ such that $f_n(z)\to g(z)$ uniformly on compact subsets of $G$. But since $\int\abs{f_n-f}^2d\mu\to 0$, it converges in measure and so there is a subsequence $\{f_{n_k}\}$ such that $f_{n_k}(z)\to f(z)$ a.e. $[\mu]$. Thus $f=g$ a.e. $[\mu]$ and so $f\in L^2_a(G)$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> If $H$ is a Hilbert space and $f,g\in H$, then $f$ adn $g$ are orthogonal if $\langle f,g\rangle$. In symbols, $f\perp g$. If $A,B\subseteq H$, then $A\perp B$ if $f\perp g$ for every $f$ in $A$ and $g$ in $B$.
</div>

<div class="alert alert-info">
<script >
theorem("Theorem",{"name":"Pythagorean Theorem","label":"PT"})
</script><em> If $f_1,f_2,\ldots,f_n$ are pairwise orthogonal vectors in $H$, then
$$
\norm{f_1+f_2+\cdots+f_n}^2=\norm{f_1}^2+\norm{f_2}^2+\cdots+\norm{f_n}^2.
$$
</em></div>

<p class="proof"><em>Proof.</em> If $f_1\perp f_2$, then
$$
\norm{f_1+f_2}^2=\langle f_1+f_2,f_1+f_1\rangle=\norm{f_1}^2+2\Re\langle f_1,f_2\rangle+\norm{f_2}^2.
$$
Since $f_1\perp f_2$, this implies the resilt for $n=2$. The remainder of the proof proceeds by induction.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"PL"})
</script><em> If $H$ is a Hilbert space and $f,g\in H$, then
$$
\norm{f+g}^2+\norm{f-g}^2=2(\norm{f}^2+\norm{g}^2).
$$
</em></div>

<p class="proof"><em>Proof.</em> For any $f$ and $g$ in $H$,
\begin{align}
\norm{f+g}^2=\norm{f}^2+2\Re\langle f,g\rangle+\norm{g}^2,\\
\norm{f-g}^2=\norm{f}^2-2\Re\langle f,g\rangle+\norm{g}^2.
\end{align}
Now add.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> If $V$ is a vector space over $\mathbf{F}$ and $A\subseteq V$, then $A$ is a <em style="color: teal;">convex</em> set if for any $x$ and $y$ in $A$ and $0\leq t\leq 1$, $tx+(1-t)y\in A$.
</div>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"OGPU"})
</script><em> If $H$ is a Hilbert space, $K$ a closed convex non-empty subset of $H$ and $h\in H$, then there is a unique points $k_0$ in $K$ such that
$$
\norm{h-k_0}=\dist(h,K)=:\inf\{\norm{h-k}\mid k\in K\}.
$$
</em></div>

<p class="proof"><em>Proof.</em> By considering $K-h=:\{k-h\mid k\in K\}$ instead of $K$, it suffices to assume that $h=0$. So we want to show that there is a qunie vector $k_0$ in $K$ such that
$$
\norm{k_0}=\dist(0,K)=:\inf\{\norm{k}\mid k\in K\}.
$$
Let $d=\dist(0,K)$. By definition, there is a seuqence $\{k_n\}$ in $K$ such that $\norm{k_n}\to d$. Now (<script>ref("PL");</script>) implies that
$$
\Norm{\frac{k_n-k_m}{2}}=\frac{1}{2}(\norm{k_n}^2+\norm{k_m}^2)-\Norm{\frac{k_n+l_m}{2}}^2.
$$
Since $K$ is convex, $(k_n+k_m)/2\in K$. Hence $\norm{(k_n+k_m)/2}^2\geq d^2$. If $\varepsilon>0$, choose $N$ such that for all $n\geq N$, $\norm{k_n}^2&lt; d^2+\varepsilon^2/4$. By the equation above, if $n,m\geq N$, then
$$
\Norm{\frac{k_n-k_m}{2}}^2&lt; \frac{1}{2}(2d^2+\frac{\varepsilon^2}{2})-d^2=\frac{\varepsilon^2}{4}.
$$
Thus $\norm{k_n-k_m}&lt; \varepsilon$ for $n,m\geq N$ and $\{k_n\}$ is Caushy. Since $H$ is complete and $K$ is closed, there is a $k_0$ in $K$ such that $\norm{k_n-k_0}\to 0$. Also for all $k_n$,
$$
d\leq\norm{k_0}=\norm{k_0-k_n+k_n}\leq\norm{k_0-k_n}+\norm{k_n}\to d.
$$
Thus $\norm{k_0}=d$. To prove that $k_0$ is unique, suppose $h_0\in K$ such that $\norm{h_0}=d$. By convexity, $(k_0+h_0)/2\in K$. Hence
$$
d\leq\Norm{\frac{h_0+k_0}{2}}\leq\frac{\norm{h_0}+\norm{k_0}}{2}=d.
$$
So $\norm{(h_0+k_0)/2}=d$, and (<script>ref("PL");</script>) implies
$$
d^2=\Norm{\frac{h_0+k_0}{2}}^2=d^2-\Norm{\frac{h_0-k_0}{2}}^2.
$$
Hence $h_0=k_0$.
<span style="float:right;">$\square$</span></p>

<p>
If the convex set in the preceding theorem is in fact a closed linear subspace of $H$, mor can be said.
</p>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"OGPE"})
</script><em> If $M$ is a closed linear subspace of $H$, $h\in H$ and $f_0$ is the unique element of $M$ such that $\norm{h-f_0}=\dist(h,M)$, then $h-f_0\perp M$. Conversely, if $f_0\in M$ such that $h-f_0\in M$, then $\norm{h-f_0}=\dist(h,M)$.
</em></div>

<p class="proof"><em>Proof.</em> Suppose $f_0\in M$ and $\norm{h-f_0}=\dist(h,M)$. If $f\in M$, then $f_0+f\in M$ and so
\begin{align}
\norm{h-f_0}^2&\leq\norm{h-(f_0+f)}^2\\
&=\norm{(h-f_0)-f}^2\\
&=\norm{h-f_0}^2-2\Re\langle h-f_0,f\rangle+\norm{f}^2.
\end{align}
Thus $$2\Re\langle h-f_0,f\rangle\leq\norm{f}^2$$ for any $f$ in $M$. Fix $f$ in $M$ and substitute $te^{i\theta}f$ for $f$ in the preceding inequality, where $\langle h-f_0,f\rangle=re^{i\theta}$, $r\geq 0$. This yields $2\Re(te^{-i\theta}re^{i\theta})\leq t^2\norm{f}^2$, or $2tr\leq t^2\norm{f}^2$. Letting $t\to 0$, we see that $r=0$, that is, $h-f_0\perp f$. For the converse, suppose $f_0\in M$ usch that $h-f_0\perp M$. If $f\in M$, then $h-f_0\perp f_0-f$ so that by (<script>ref("PT");</script>),
\begin{align}
\norm{h-f}^2&=\norm{(h-f_0)+(f_0-f)}^2\\
&=\norm{h-f_0}^2+\norm{f_0-f}^2\\
&\geq\norm{h-f_0}^2.
\end{align}
Thus $\norm{h-f_0}=\dist(h,M)$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> If $H$ is a Hilbert space and $A\subseteq H$, then define $A^\perp=\{f\in H\mid f\perp g\ \textrm{ for all }g\textrm{ in }A\}$.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"PIOL"})
</script><em> Let $A\subseteq H$. Then $A^\perp$ is a closed linear subsepace of $H$.
</em></div>

<p class="proof"><em>Proof.</em> To show that $A^\perp$ is closed, let $\{x_n\}$ be a sequence in $A^\perp$ such that $x_n\to x\in H$. To shwo that $x\in A^\perp$, let $a\in A$. Then $\langle x_n,a\rangle=0$ for all $n$ and so $\lim_n\langle x_n,a\rangle=\langle\lim_n x_n,a\rangle=\langle x,a\rangle=0$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Corollary",{"label":"OGPC"})
</script><em> If $M$ is a closed linear subspace of $H$, $h\in H$ and $f_0$ is the unique element of $M$ such that $h-f_0\in M^\perp$.
</em></div>

<p class="proof"><em>Proof.</em> This follows from (<script>ref("OGPE");</script>) together with the uniqueness statement in (<script>ref("OGPU");</script>).
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition",{"label":"OGPD"})
</script> By (<script>ref("OGPD");</script>) if $M$ is a closed linear subspace of $H$ and $h\in H$, a function $P=P_M:H\to M$ can be defined so that $h-Ph\perp M$. $P$ is called the <em style="color: teal;">orthogonal projection</em> of $H$ onto $M$.
</div>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"BPOP"})
</script><em> If $M$ is a closed linear subspace of $H$ and $h\in H$, then</em>
<ol class="parenthesis" style="font-style: italic;">
    <li>$P$ is a linear transformation on $H$,</li>
    <li>$\norm{Ph}\leq\norm{h}$ for every $h$ in $H$,</li>
    <li>$P^2=P$,</li>
    <li>$\Ker P=M^\perp$ and $\Ima P=M$.</li>
</ol></div>

<p class="proof"><em>Proof.</em> Keep in mind that for every $h\in H$, $h-Ph\in M^\perp$ and $\norm{h-Ph}=\dist(h,M)$. (i) Let $h_1$, $h_2\in H$ and $\alpha_1$, $\alpha_2\in\mathbf{F}$. If $f\in M$ then $$
        \begin{align}
        &\langle(\alpha_1h_1+\alpha_2h_2)-(\alpha_1Ph_1+\alpha_2Ph_2),f\rangle\\
        =&\alpha_1\langle h_1-Ph_1,f\rangle+\alpha_2\langle h_2-Ph_2,f\rangle\\
        =&0.
        \end{align}
        $$
        Therefore by the uniqueness statement of (<script>ref("OGPE");</script>), $P(\alpha h_1+\alpha_2h_2)=\alpha_1Ph_1+\alpha_2Ph_2$. (ii) If $h\in H$, then $h=(h-Ph)+Ph$, $Ph\in M$, and $h-Ph\in M^\perp$. Thus $\norm{h}^2=\norm{h-Ph}^2+\norm{Ph}^2\geq\norm{Ph}^2$. (iii) If $f\in M$, then $Pf=f$. For any $h\in H$, $Ph\in M$. Hence $P^2h=P(Ph)=Ph$, that is, $P^2=P$. (iv) If $Ph=0$, then $h=h-Ph\in M^\perp$. Conversely, if $h\in M^\perp$, then $0$ is the unique vector in $M$ such that $h-0=h\perp M$ and $h\in M^\perp$. Therefore $Ph=0$. The assertion $\Ima P=M$ is clearly.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> We introduce the notation $M\leq H$ to signify that $M$ is a closed linear subspace of $H$. We will use the term <em style="color: teal;">linaer manifold</em> to designate a linear subspace of $H$ that is not necessarily clsoed. A <em style="color: teal;">linear subsapce</em> of $H$ will always mean a closed linear subsapce.
</div>

<div class="alert alert-info">
<script >
theorem("Corollary",{"label":"PPLS"})
</script><em> If $M\leq H$ then $(M^\perp)^\perp=M$.
</em></div>

<p class="proof"><em>Proof.</em> If $I$ is used to designate the identity operator on $H$ and $P=P_M$, then $I-P$ is the orthogonal projection of $H$ onto $M\perp$ (exercise). By part (iv) of (<script>ref("BPOP");</script>), $(M^\perp)^\perp=\Ker(I-P)$. But $0=(I-P)h$ if and only if $h=Ph$. Thus $(M^\perp)^\perp=\Ker(I-P)=\Ima P=M$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> If $A\subseteq H$, let $\wedge A$ be the intersection of all clsoed linear subspae of $H$ that contain $A$. $\wedge A$ is called the <em style="color: teal;">closed linear span</em> of $A$.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"CLS"})
</script><em> Let $A\subseteq H$.</em>
    <ol class="parenthesis" style="font-style: italic;">
        <li>$\wedge A\leq H$. In particular, $\wedge A$ is the smallest closed linear subsapce of $H$ that contains $A$.</li>
        <li>$\wedge A$ is the closure of $\{\sum_{k=1}^n\alpha_kf_k\mid n\geq 1,\ \alpha_k\in\mathbf{F},\ f_k\in A\}$.</li>
    </ol>
</div>

<p class="proof"><em>Proof.</em> $\wedge A$ is clearly closed in $H$ and so $\wedge A\leq H$. Hence the first reslut follows. It is easy to see that the closure of $\{\sum_{k=1}^n\alpha_kf_k\mid n\geq 1,\ \alpha_k\in\mathbf{F},\ f_k\in A\}$ is the smallest closed linear subsapce of $H$ that contains $A$. Hence the second result follows.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Corollary",{"label":"PPLM"})
</script><em> If $A\subseteq H$, then $(A^\perp)^\perp$ is the closed linear span of $A$ in $H$.
</em></div>

<p class="proof"><em>Proof.</em> By (<script>ref("PIOL");</script>), $(A^\perp)^\perp$ is a closed linear subspace of $H$. We need to show that $\wedge A\subseteq(A^\perp)^\perp$. If $B$ is a closed linear subsapce of $H$ containing $A$, then $A\subseteq B$ and so $B^\perp\subseteq A^\perp$ and $(A^\perp)^\perp\subseteq(B^\perp)^\perp$. By (<script>ref("PPLS");</script>), $(B^\perp)^\perp=B$. Hence $(A^\perp)^\perp$ is the smallest linear subsapce of $A$ containing $A$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Corollary",{"label":"DIP0"})
</script><em> If $Y$ is a linear manifold in $H$, then $Y$ is dense in $H$ if and only if $Y^\perp=(0)$.
</em></div>

<p class="proof"><em>Proof.</em> If $Y$ is a linear manifold of $H$ then $\overline{Y}=\wedge Y$ by (ii) of (<script>ref("CLS");</script>), and $\wedge Y=(Y^\perp)^\perp$ by (<script>ref("PPLM");</script>). If $Y$ is dense in $H$ then $\wedge Y=(Y^\perp)^\perp=H$ and so $Y^\perp=(0)$. Conversely, if $Y^\perp=(0)$ then $(Y^\perp)^\perp=M$ and so $Y$ is dense in $H$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> let $H$ be a Hilbert space and $L:H\to\mathbf{F}$ a linear functional. Then the following statements are equivalent:</em>
<ol class="parenthesis" style="font-style: italic;">
    <li>$L$ is continuous.</li>
    <li>$L$ is continuous at $0$.</li>
    <li>$L$ is continuous at some point.</li>
    <li>There is a constant $c>0$ such that $\abs{L(h)}\leq c\norm{h}$ for every $h\in H$.</li>
</ol>
</div>

<p class="proof"><em>Proof.</em> If is clearly that (i)$\Rightarrow$(ii)$\Rightarrow$(iii) and (iv)$\Rightarrow$(ii). We will show that (iii)$\Rightarrow$(i) and (ii)$\Rightarrow$(iv). Suppose $L$ is continuous at $h_0$ and $h$ is any point in $H$. If $h_n\to h$ in $H$, then $h_n-h+h_0\to h_0$. By assumption,
\begin{align}
L(h_0)&=\lim_{n\to\infty}L(h_n-h+h_0)\\
&=\lim_{n\to\infty}\big(L(h_n)-L(h)+L(h_0)\big)\\
&=\lim_{n\to\infty}L(h_n)-L(h)+L(h_0).
\end{align}
Hence $L(h)=\lim L(h_n)$, and (iii)$\Rightarrow$(i) is prove. To show that (ii)$\Rightarrow$(iv), assume $L$ is continuous at $0$. Thus $L^{-1}(\{\alpha\in\mathbf{F}\mid\abs{\alpha}&lt; 1\})$ contains an open neibhnorhood of $0$. So there is a $\delta> 0$ such that $B(0,\delta)\subseteq L^{-1}(\{\alpha\in\mathbf{F}\mid\abs{\alpha}&lt; 1\})$, that is, $\norm{h}&lt;\delta$ implies $\abs{L(h)}&lt; 1$. If $h$ is an arbitrary element of $H$ and $\varepsilon> 0$, then $\norm{\delta(\norm{h}+\varepsilon)^{-1}}&lt;\delta$. Hence
$$
1> \Abs{L\left[\frac{\delta h}{\norm{h}+\varepsilon}\right]}=\frac{\delta}{\norm{h}+\varepsilon}\abs{L(h)}.
$$
Thus $\abs{L(h)}&lt;(\norm{h}+\varepsilon)/\delta$. Let $\varepsilon\to 0$ we see that (iv) holds with $c=1/\delta$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> A bounded linear functional $L$ on $H$ is a linear functional for which there is a constant $c> 0$ such that $\abs{L(h)}\leq c\norm{h}$ for all $h\in H$. In light of the preceding proposition, a linear functional is bounded if ando nly if it is continuous. In this case, define
$$
\norm{L}_\op:=\sup\{\abs{L(h)}\mid\norm{h}\leq 1\}.
$$
Note that by definition, $\norm{L}_\op &lt; \infty$. $\norm{L}_\op$ is called the <em style="color: teal;">operator norm</em> of $L$.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $L$ be a bounded linear functional on $H$. Then
\begin{align}
\norm{L}_\op&=\sup\{\abs{L(h)}\mid\norm{h}=1\}\\
&=\sup\{\abs{L(h)}/\norm{h}\mid h\in H,\ h\neq 0\}\\
&=\inf\{c> 0:\abs{L(h)}\leq c\norm{h},\ h\in H\}.
\end{align}
Also, $\abs{L(h)}\leq\norm{L}_\op\norm{h}$ for every $h$ in $H$.
</em></div>

<p class="proof"><em>Proof.</em> Let $\alpha=\sup\{\abs{L(h)}\mid\norm{h}=1\}$. Clearly $\alpha\leq\norm{L}_\op$. If $h\in H$ is non-zero with $\norm{h}\leq 1$, then $\abs{L(h)}/\norm{h}=L(h/\norm{h})\leq\alpha$ by the definition of $\alpha$ and so $\abs{L(h)}\leq\alpha\norm{h}\leq\alpha$. Hence $\norm{L}_\op\leq\alpha$. Let $\beta=\sup\{\abs{L(h)}/\norm{h}\mid h\in H,\ h\neq 0\}$. Then $\alpha\leq\beta$ clearly. If $h\in H$ with $h\neq 0$, then $L(h)/\norm{h}=L(h/\norm{h})\leq\alpha$ by the definition of $\alpha$. Hence $\beta\leq\alpha$. Let $\gamma=\inf\{c> 0:\abs{L(h)}\leq c\norm{h},\ h\in H\}$. If $\varepsilon>0$, then the definition of $\norm{L}_\op$ shows that $\abs{L(\norm{h}+\varepsilon)^{-1}h}\leq\norm{L}_\op$. Hence $\abs{L(h)}\leq\norm{L}(\norm{h}+\varepsilon)$. Letting $\varepsilon\to 0$ shows that $\abs{L(h)}\leq\norm{L}_\op\norm{h}$ for all $h$. So the definition of $\alpha$ shows that $\alpha\leq\norm{L}$. On the other hand, if $\abs{L(h)}\leq c\norm{h}$ for all $h$, then $\norm{L}\leq c$. Hence $\norm{L}\leq\alpha$.
<span style="float:right;">$\square$</span></p>

<p>
Fix an $h_0$ in $H$ and define $L:H\to\mathbf{F}$ by $L(h)=\langle h,h_0\rangle$. It is easy to see that $L$ is linear. Also, (<script>ref("CBSI");</script>) gives that $\abs{L(h)}=\abs{\langle h,h_0\rangle}\leq\norm{h}\norm{h_0}$. So $L$ is bounded and $\norm{L}_\op\leq\norm{h_0}$. In fact, $L(h_0/\norm{h_0})=\langle h_0/\norm{h_0},h_0\rangle=\norm{h_0}$. (<a href=#RRT></a>) is the converse of this result:
</p>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"RRT","name": "Riesz Representation Theorem"})
</script><em> Let $L:H\to\mathbf{F}$ be a bounded linear functional. Then there is a unique vector $h_0\in H$ such that $L(h)=\langle h,h_0\rangle$ for every $h\in H$. Moreover, $\norm{L}_\op=\norm{h_0}$.
</em></div>

<p class="proof"><em>Proof.</em> Let $M=\Ker L$. Because $L$ is continuous, $M$ is a closed linear subspace of $H$. Since we may assume that $M\neq H$, $M^\perp\neq (0)$. Hence there is a vector $f_0$ in $M^\perp$ such that $L(f_0)=1$. Now if $h\in H$ and $\alpha= L(h)$, then $L(h-\alpha f_0)=L(h)-\alpha=0$. Thus $h-L(h)f_0\in M$ and
$$
0=\langle h-L(h)f_0,f_0\rangle=\langle h,f_0\rangle-L(h)\norm{f_0}^2.
$$
So if $h_0=\norm{f_0}^{-2}f_0$ then $L(h)=\langle h,h_0\rangle$ for all $h$ in $H$. For the uniqueness, if $h_0'\in H$ such that $\langle h,h_0\rangle=\langle h,h_0'\rangle$ for all $h$, then $h_0-h_0'\in H$. In particular, $h_0-h_0'\perp h_0-h_0'$ and so $h_0'=h_0$. The fact that $\norm{L}_\op=\norm{h_0}$ was shown in the discussion preceeding the theorem.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Corollary")
</script><em> If $(X,\Omega,\mu)$ is a measure space and $F:L^2(\mu)\to\mathbf{F}$ is a bounded linear functional, then there is a unique $h_0$ in $L^2(\mu)$ such that
$$
F(h)=\int h\overline{h_0}d\mu
$$
for every $h$ in $L^2(\mu)$.
</em></div>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> An <em style="color: teal;">orthonormal</em> subset of a Hilbert space $H$ is a subset $E$ such that
<ol class="parenthesis">
    <li>for every $e\in E$, $\norm{e}=1$,</li>
    <li>if $e_1,e_2\in E$ with $e_1\neq e_2$, $e_1\perp e_2$.</li>
</ol>
A <em style="color: teal;">basis</em> for $H$ is a maximal orthonormal set.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> If $E$ is an orthonormal set in $H$, then there is a basis for $H$ that contains $E$.
</em></div>
<p class="proof"><em>Proof.</em> Omiited.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Theorem",{"name":"Gram-Schmidt Process","label":"GSOP"})
</script><em> If $H$ is a Hilbert space and $\{h_n\}_{n\in\mathbf{N}}$ is a linearly independent subset of $H$, then there is an orthonormal set $\{e_n\}_{n\in\mathbf{N}}$ such that for every $n$, the linear space of $\{e_1,\ldots,e_n\}$ equals the linear space of $\{h_1,\ldots,h_n\}$.
</em></div>

<p class="proof"><em>Proof.</em> Omitted.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $\{e_1,\ldots,e_n\}$ be an orthonormal set in $H$ and let $M=\wedge\{e_1,\ldots,e_n\}$ and $P$ the orthogonal projection of $H$ onto $M$. Then
$$
Ph=\sum_{k=1}^n\langle h,e_k\rangle e_k
$$
for all $h$ in $H$.
</em></div>

<p class="proof"><em>Proof.</em> Let $Qh=\sum_{k=1}^n\langle h,e_k\rangle e_k$. If $1\leq j\leq n$ then $\langle Qh,e_j\rangle=\sum_{k=1}^n\langle h,e_k\rangle\langle e_k,e_j\rangle=\langle h,e_k\rangle$ since $e_k\perp e_j$ for $k\neq j$. Thus $\langle h-Qh,e_j\rangle=0$ for $1\leq j\leq n$. That is, $h-Qh\perp M$ for every $h$ in $H$. Since $Qh$ is clearly a vector in $M$, $Qh$ is the unique vector $h_0$ in $M$ such that $h-h_0\perp M$, see (<script>ref("OGPC");</script>). Hence $Qh=Ph$ for every $h\in H$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition",{"name":"Bessel's Inequality","label":"BI"})
</script><em> If $\{e_n\}_{n\in\mathbf{N}}$ is an orthonormal set and $h\in H$, then
$$
\sum_{n=1}^\infty\abs{\langle h,e_n\rangle}^2\leq\norm{h}^2.
$$
</em></div>

<p class="proof"><em>Proof.</em> Let $h_n=h-\sum_{k=1}^n\langle h,e_k\rangle e_k$. Then $h_n\perp e_k$ for $1\leq k\leq n$. By (<script>ref("PT");</script>),
\begin{align}
\norm{h}^2&=\norm{h_n}^2+\Norm{\sum_{k=1}^n\langle h,e_k\rangle e_k}^2\\
&=\norm{h_n}^2+\sum_{k=1}^n\abs{\langle, h,e_k\rangle}^2\\
&\geq\sum_{k=1}^n\abs{\langle h,e_k\rangle}^2.
\end{align}
Since $n$ was arbitrary, the result is proved.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Corollary",{"label":"OSCN"})
</script><em> Let $E$ be an orthonormal set in $H$ and $h\in H$. Then $\langle h,e\rangle\neq 0$ for at most a countable number of vectors $e$ in $E$.
</em></div>

<p class="proof"><em>Proof.</em> For each $n\geq 1$ let $E_n=\{e\in E\mid\abs{\langle h,e\rangle}\geq 1/n\}$. By (<script>ref("BI");</script>), $E_n$ is finite. But $\bigcup_{n=1}^\infty E_n=\{e\in E\mid\langle h,e\rangle\neq 0\}$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Corollary",{"label":"PIN"})
</script><em> Let $E$ be an orthonormal set and $h\in H$. Then
$$
\sum_{e\in E}\abs{\langle h,e\rangle}^2\leq\norm{h}^2.
$$
</em></div>

<p class="proof"><em>Proof.</em> This is just (<script>ref("BI");</script>) and the fact (<script>ref("OSCN");</script>) that at most a countable number of the terms in the sum differ from zero.
<span style="float:right;">$\square$</span></p>

<p>
Actually, the sum that appears in (<script>ref("PIN");</script>) can be given a better interpretation. The question is, what is meant by $\sum_{i\in I}h_i$ if $h_i\in H$ and $I$ is an infinite, possible uncountable, set? Let $\mathcal{F}$ be the collection of all finite subset of $I$ and order $\mathcal{F}$ by inclusion, so $\mathcal{F}$ be comes a directed set. For each $F$ in $\mathcal{F}$, define
$$
h_F=\sum_{i\in F}h_i.
$$
Since this is a finite sum, $h_F$ is a well-defined element of $H$. Now $\{h_F\}_{F\in\mathcal{F}}$ is a net in $H$.
</p>

<div class="alert alert-warning">
<script >
theorem("Definition",{"label":"USC"})
</script> With the notation above, the sum $\sum_{i\in I}h_i$ <em style="color: teal;">converges</em> if the net $\{h_F\mid F\in\mathcal{F}\}$ converges; the value of the sum is the limit of the net.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script>
    <ol class="parenthesis" style="font-style: italic;">
        <li>If $\{h_n\}$ is a sequence in $H$ and $\sum_{n\in\mathbf{N}}h_n$ converges to $h$ in the sense of <span style="font-style: normal;">(<script>ref("USC");</script>)</span>, then $\sum_{k=1}^\infty h_k=h$, and the converes is false.</li>
        <li>If $\{h_n\}$ is a sequence in $H$ and $\sum_{n=1}^\infty h_n$ converges absolutly, then $\sum_{n\in\mathbf{N}}h_n$ converges to $\sum_{n=1}^\infty h_n$ in the sense of <span style="font-style: normal;">(<script>ref("USC");</script>)</span>.</li>
        <li>If $\{\alpha_n\}$ is a sequence in $\mathbf{F}$ then $\sum_{n\in\mathbf{N}}\alpha_n$ converges in the sense of <span style="font-style: normal;">(<script>ref("USC");</script>)</span> if and only if $\sum_{n=1}^\infty\alpha_n$ converges absolutly. In this case, $\sum_{n\in\mathbf{N}}\alpha_n=\sum_{n=1}^\infty\alpha_n$.
    </ol>
</div>

<div class="proof"><em>Proof.</em><ol class="parenthesis">
        <li>If $\sum_{n\in\mathbf{N}}h_n$ converges to $h$ then for a given $\varepsilon>0$, there exists $F\in\mathcal{F}$ such that for any $F'\geq F$, $\sum_{n\in F'}h_n\in B(h,\varepsilon)$. Let $N$ be the largest number in $F$ so that for any $k\geq N$, $F:=F\cup\{N+1,\ldots,k\}\geq F$ and $\sum_{k=n}^kh_n=\sum_{k\in F'}h_n\in B(h,\varepsilon)$. Hence $\sum_{n=1}^\infty h_n=h$.</li>
        <li>Let $h=\sum_{n=1}^\infty h_n$. Given $\varepsilon>0$, there exists $N\in\mathbf{N}$ such that for any integra $k \geq N$, $\sum_{n=1}^kh_n\in B(h,\varepsilon)$. Let $F=\{1,\ldots,N\}$. Givan any $F'\in\mathcal{F}$ with $F'\geq F$, to show that $\sum_{n\in F'}h_n\in B(h,\varepsilon)$, we may reorder the index and assume $F'=\{1,\ldots,N,N+1,\ldots,N+k\}$ for some $k\in\mathbf{N}$ since $\sum_{n=1}^\infty h_n$ converges absolutely. Thus $\sum_{n\in F'}h_n=\sum_{k=1}^{N+N'}\in B(h,\varepsilon)$</li>
        <li>If $\sum_{n\in\mathbf{N}}\alpha_n$ converges to $h$ then $\sum_{n=1}^\infty\alpha_k$ converges to $h$ by (i). To show that $\sum_{n=1}^\infty\alpha_k$ converges absolutely, by (), it suffices to show that for any permutation $\{\beta_k\}$ of $\{\alpha_k\}$, $\sum_{n=1}^\infty\alpha_n=\sum_{n=1}^\infty\beta_n$, which is an immediately consequence of the definition of net convergence.</li>
    </ol>
<span style="float:right;">$\square$</span></div>

<div class="alert alert-info">
<script >
theorem("Lemma",{"label":"OICT"})
</script><em> Let $E$ be an orthonormal set and $h\in H$. Then
$$
\sum_{e\in E}\langle h,e\rangle e
$$
converges in $H$.
</em></div>

<p class="proof"><em>Proof.</em> By (<script>ref("OSCN");</script>), there are vectors $e_1,e_2,\ldots,$ such that $\{e\in E\mid\langle h,e\rangle\neq 0\}=\{e_1,e_2,\ldots\}$. We also know that $\sum_{n=1}^\infty\abs{\langle h,e_n\rangle}^2&lt;\varepsilon^2$. Let $F_0=\{e_1,\ldots,e_{N-1}\}$ and let $\mathcal{F}$ be the st of all finite subsets of $E$. For $F\in\mathcal{F}$, define $h_F=\sum_{e\in F}\langle h,e\rangle$. If $F$ and $G$ in $\mathcal{F}$ and both contain $F_0$, then
\begin{align}
\norm{h_F-h_G}^2&=\sum\_{e\in(F\setminus G)\cup(G\setminus F)}\abs{\langle h,r\rangle}^2\\
&\leq\sum_{n=N}^\infty\abs{h,e_n\rangle}^2\\
&&lt;\varepsilon^2.
\end{align}
So $\{h_F\mid F\in\mathcal{F}\}$ is a Cauchy net in $H$. Because $H$ is compelte, this net converges. In fact, it converges to $\sum_{n=1}^\infty\langle h,e_n\rangle e_n$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Theorem",{"label":"ECOB"})
</script><em> Let $E$ be an orthonormal set in $H$. Then the following statements are equivalent:</em>
    <ol class="parenthesis" style="font-style: italic;">
        <li>$E$ is a basis for $H$.</li>
        <li>if $h\in H$ and $h\perp E$ then $h=0$.</li>
        <li>$\wedge E=H$.</li>
        <li>If $h\in H$ then $h=\sum_{e\in E}\langle h,e\rangle e$.</li>
        <li>If $g$ and $h$ in $H$ then $\langle g,h\rangle=\sum_{e\in E}\langle g,e\rangle\langle e,h\rangle$.</li>
        <li>If $h\in H$ then <p hidden>
        \norm{h}^2=\sum_{e\in E}\abs{\langle h,e\rangle}^2.
        </p><script>eq("PARI")</script>
        </li>
    </ol><em>
<span style="font-style: normal;">(<script>ref("PARI");</script>)</span> is called Parseval's Identity.
</em></div>

<p class="proof"><em>Proof.</em>(i)$\Rightarrow$(ii) Suppose $h\perp E$ and $h\neq 0$. Then $E\cup\{h/\norm{h}\}$ is an orthonormal set that properly contains $E$, contradicting the maximality. (ii)$\Leftrightarrow$(iii) By (<script>ref("DIP0");</script>), $\wedge E=H$ if and only if $E^\perp=(0)$. (iii)$\Rightarrow$(iv) If $h\in H$ then $f=h-\sum_{e\in E}\langle h,e\rangle r$ is a well-defined vector by (<script>ref("OICT");</script>). If $e_1\in E$ then $\langle f,e_1\rangle=\langle h,e_1\rangle-\sum_{e\in E}\langle h,e\rangle\langle e,e_1\rangle=\langle h,e_1\rangle-\langle h,e_1\rangle=0$, where we use the the continuity of inner product so that it maps convergent nets to convergent nets. (iv)$\Rightarrow$(v) is similarly. (v)$\Rightarrow$(i) Since $\norm{h}^2=\langle h,h\rangle$, this is immediate. If $E$ is not a basis, then there is a unit vector $e_0$ in $H$ such that $e_0\perp E$. Hence $0=\sum_{e\in E}\abs{\langle e_0,e\rangle}^2$, contradicting the assumption.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> If $H$ is a Hilbert space, then any two bases have the same cardinality.
</em></div>

<p class="proof"><em>Proof.</em> Let $E$ and $F$ be two bases for $H$. Let $\kappa$ be the cardinlaity of $E$, and $\mu$ the cardinality of $F$. If $\kappa$ or $\mu$ is finite,then since $E$ and $F$ are maimal linearly independent sets, we see that $\kappa=\mu$, as otherwise $\kappa&lt; \mu$ implies that we can choose $h\in H$ such that $E\cup\{h\}$ is linearly independent, and we may assume that $E\cup\{h\}$ is an orthonormal set by (<script>ref("GSOP");</script>). Suppose both $\varepsilon$ and $\eta$ are infinite. For $e\in E$, let $\mathcal{F}_e=\{f\in\mathcal{F}\mid\langle e,g\rangle\neq 0\}$. Thus $\mathcal{F}_e$ is countable. By (ii) of (<script>ref("ECOB");</script>), each $f\in\mathcal{F}$ belongs to at least one set $\mathcal{F}_e$, $e\in E$. Therefore $\mathcal{F}=\bigcup_{e\in E}\mathcal{F}_e$ and $\mu\leq\kappa\cdot\aleph_0=\kappa$. Similarly $\kappa\leq\mu$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> The <em style="color: teal;">dimension</em> of a Hilbert space is the cardinality of a basis and is denoted by $\dim H$.
</div>

<p>
If $(X,d)$ is a metric space that is separable and $\{B_i=B(x_i,\varepsilon_i)\mid i\in I\}$ is a collection of pairwise disjoint open balls in $X$, then $I$ must be countable. Indeed, if $D$ is a countable dense subset of $X$, $B_i\cap D$ is non-empty for each $i\in I$. Thus there is a point $x_i$ in $B_i\cap D$. So $\{x_i\}_{i\in I}$ is a subset of $D$ having the cardinality $I$; thus $I$ must be countable.
</p>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $H$ be an infinite dimensional Hibert sapce. Then $H$ is separable if and only if $\dim H=\aleph_0$.
</em></div>

<p class="proof"><em>Proof.</em> Let $E$ be a basis for $H$. If $e_1$, $e_2\in E$, then $\norm{e_1-e_2}^2=\norm{e_1}^2+\norm{e_2}^2=2$. Hence $\{B(e;1/\sqrt{2})\mid e\in E\}$ is a collection of pairwise disjoint open balls in $H$. From the discussion preceding this proposition, the assumption that $H$ is separable implies $E$ is countable. Conversely, if $\dim H=\aleph_0$, then $\{B(e;r)\mid e\in E,r\in\mathbf{Q}\}$ is a countable dense subset of $H$.
<span style="float:right;">$\square$</span></p>
</div>
</div>
</div>

<script>
    section("part","Algebra")
</script>
<div class="collapse" id="content-algebra">

<script>
    section("chapter","Jacquet-Langlands Theory")
</script>
<div class="collapse" id="content-jacquet-langlands-theory">
<script>
    section("section","Distribution and Sheaf")
</script>
<div class="collapse" id="content-distribution-and-sheaf">

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"KCCOS"})
</script><em> Let $G$ be a locally profinite group and $\psi:G\to GL_m(\mathbf{C})$ a continuous group homomorphism. Then the kernel of $\psi$ contains an open subgroup of $G$.
</em></div>

<p class="proof"><em>Proof.</em> Let $U$ be an open neighborhoof of identity of $GL_m(\mathbf{C})$ small enough such that $U$ does not contain any non-trivial subgroup. Then $\psi^{-1}(U)$ is an open subset of $G$ containing the ideneity. By the definition of localy profinite gorup, $\psi^{-1}(U)$ contains a compact open subgroup of $G$, say $K$. Then $\psi(K)\subseteq U$ and so $\psi(K)$ is the trivial group, that is, $K\subseteq\Ker\psi$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"ESOD"})
</script><em> Let $X$ be a locally profinite space and $C\subseteq X$ a closed subset. Then we have exact sequences</em>
<p hidden>
0\to C_c^\infty(X-C)\to C_c^\infty(X)\to C_c^\infty(C)\to 0
</p><script>eq("DES1")</script><em>
and</em>
<p hidden>
0\to D(C)\to D(X)\to D(X-C)\to 0.
</p><script>eq("DES2")</script>
</div>

<p class="proof"><em>Proof.</em> We proves (<script>ref("DES1");</script>) so that (<script>ref("DES2");</script>) follows by dualizing. We obtain a map $C_c^\infty(X-C)\to C_c^\infty(X)$ by extending a function $f\in C_c^\infty(X-C)$ by zero on $C$ ot a function in $C_c^\infty(X)$, where the continuity follows from the fact that $f$ is of compact support, and the map $C_c^\infty(X)\to C_c^\infty(C)$ just a restriction of functions to $C$. Regarding the exactness of (<script>ref("DES1");</script>), the only point that is not clear is the surjectivity of restriction to $C$. Let $f\in C_c^\infty(C)$. Because $f$ is compactly supported and locally constant, there exist disjoint open and compact sets $U_i\subseteq C$ and $a_i\in\mathbf{C}$ such that $f(x)=a_i$ if $x\in U_i$ and $f(x)=0$ off $\bigcup_i U_i$. Let $V_i$ be open and compact subsets of $X$ such that $U_i=V_i\cap C$, see (<script>ref("COID");</script>). We may arrange that the $V_i$ are disjoint by successively replacing $V_i$ by $V_i-\bigcup_{j&lt; i}V_j$, which are also open and compact and give the $U_i$ on intersection with $C$. Then we extend the function $f$ to $X$ by letting $f(x)=a_i$ if $x\in V_i$ and $f(x)=0$ off $\bigcup V_i$. This proves the exactness of (<script>ref("DES1");</script>).
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $G$ be a LCTD group. We define actions of $G$ on $G$, $C_c^\infty$ and $D(G)$ by right and left translation as follows:
<ol class="parenthesis">
    <li>$\rho(g)x=xg^{-1}$ and $\lambda(g)x=gx$ for $g,x\in G$.</li>
    <li>$(\rho(g)f)(x)=f(xg)$ and $(\lambda(g)f)(x)=f(g^{-1}x)$ for $f\in C_c^\infty(G)$ and $g,x\in G$.</li>
    <li>$(\rho(g)T)(f)=T(\rho(g^{-1})f)$ and $(\lambda(g)T)(f)=T(\lambda(g^{-1})f)$ for $T\in D(G)$ and $f\in C_c^\infty(G)$.</li>
</ol>
The arrangement of inverse in these formulas is determined by the requirement that $\rho(g_1g_2)=\rho(g_1)\rho(g_2)$ and $\lambda(g_1g_2)=\lambda(g_1)\lambda(g_2)$.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $G$ be a locally profinite group, $\xi$ a character of $G$ and $T$ a distribution on $G$ that satisfies $\lambda(h)T=\xi(h)^{-1}T$ for $h\in G$. Then there exists a constant $c$ such that</em>
<p hidden>
T(f)=c\int_G\xi(h)f(h)dh,
</p><script>eq("DIAI")</script>
<em>where $dh$ denotes the left Haar measure.
</em></div>
<p>
Of course, a similar statement is true for the right Haar measure.
</p>

<div class="proof"><em>Proof.</em> We define another distribution by $T':f\mapsto T(\xi^{-1}f)$; since $\xi^{-1}$ a character, its kernel contains an open subgroup of $G$ by (<script>ref("KCCOS");</script>) and so $\xi^{-1}$ is locally constant; thus the distribution $T'$ is well-defined. For any $h\in G$,
\begin{align}
\lambda(h)T'(f)&=T'(\lambda(h)^{-1}f)\\
&=T'(f(\lambda\square))\\
&=T(\xi^{-1}f(h\square))\\
&=\xi^{-1}(h^{-1})T(\xi^{-1}(h\square)f(h\square))\\
&=\xi(h)\lambda(h)T(\xi^{-1}f)\\
&=\xi(h)\xi(h)^{-1}T(\xi^{-1}f)\\
&=T'(f).
\end{align}
Hence we may assume that $\xi=1$ by replacing $T$ with $T'$. Let $K$ be a fixed open copmact subgroup of $G$, which exists by the locally profiniteness. We will show that (<script>ref("DIAI");</script>) is valid for all $f$ with
$$
c=T\left(\frac{1_K}{\vol(K)}\right).
$$
If $f\in C_c^\infty(G)$. Let $S(f)=\{h\in G\mid\lambda(h)f=f\}$. Then $S(f)$ is a subgroup of $G$. Since $f$ is locally constant, $S(f)$ is open and so contains a compact open subgroup $K_0$ of $K$. Let $h_1,\ldots,h_r$ be representives for those cosets in $G/K_0$ (finite in number) on which $f$ does not vanish, and let $a_i=f(h_i)$. Then
$$
f=\vol(K_0)\sum_{i=1}^ra_i\lambda(h_i)\frac{1_{K_0}}{\vol(K_0)}.
$$
Using the hypothesis that $T$ is invariant under left translation, we now have
<p hidden>
T(f)=\vol(K_0)\sum_{i=1}^ra_iT\left(\frac{1_{K_0}}{\vol(K_0)}\right).
</p><script>eq("KCCOS1")</script>
Apply this formula with $f=1_K/\vol(K)$. Then $S(f)=K$ and $K_0$ can be any open subgroup of $K$ small enough so that $K_0\subseteq S(f)$. The index of $K_0$ in $K$ equals $\vol(K)/\vol(K_0)$, and so (<script>ref("KCCOS1");</script>) implies that
<p hidden>
c=T\left(\frac{1_{K}}{\vol(K)}\right)=T(f)=\vol(K_0)\frac{r}{\vol(K)}T\left(\frac{1_{K_0}}{\vol(K_0)}\right)=T\left(\frac{1_{K_0}}{\vol(K_0)}\right)
</p><script>eq("KCCOS2")</script>
Now let $f$ be general. Substite (<script>ref("KCCOS2");</script>) into (<script>ref("KCCOS1");</script>) so that
\begin{align}
T(f)&=\vol(K_0)\sum_{i=1}^ra_ic\\
&=c\sum_{i=1}^r\int_Ga_i1_{h_iK_0}(h)dh\\
&=c\sum_{i=1}^r\int_Ga_i1_{K_0}(h_i^{-1}h)dh\\
&=c\int_G\sum_{i=1}^ra_i\lambda(h_i)1_{K_0}(h)dh\\
&=c\int_Gf(h)dh,
\end{align}
which completes this proof.
<span style="float:right;">$\square$</span></div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $G$ be a locally profinite group and $H$ a closed subgroup. Then $\Lambda:C_c^\infty(G)\to C_c^\infty(G/H)$ is surjective.
</em></div>

<p class="proof"><em>Proof.</em> Let $\phi\in C_c(G/H)$ and let $U\subseteq G/H$ be the support of $\phi$. Then $U$ is open and compact by the localy constant-ness. Its preimage $p^{-1}(U)$ in $G$ may not be compact, but we will prove the existsence of an open and compact set $V\subseteq G$ such that $p(V)=U$. Indeed, $p^{-1}(U)$ has an open cover $\{V_i\}_{i\in I}$ by open and open compact sets of $G$. Each set $p(V_i)$ is open, and the sets $p(V_i)$ cover $U$. Because $U$ is compact, the index set $I$ has a finite subset $J$ such that the sets $p(V_j)$ cover $U$. Let $V\subseteq G$ be the union of the $V_j$, $j\in J$. Then $V$ is open and compact and $p(V)=U$. Consider $1_V$ the characteristic function of $V$. $\Lambda(1_V)$ and $\phi$ have the same support $U$ since $\supp(\Lambda(1_V))\subseteq p(\supp(1_V))=p(V)=U$ in general by (), and if $p(g)\notin\supp(\Lambda(1_V))$ with $g\in v$, then $\Lambda(1_V)\equiv 0$ on some open neighborhood $W$ of $p(g)$ in $G/H$, that is, $\int_H1_V((-)h)dh\equiv 0$ on $p^{-1}(W)\cap V$. By (), $1_V\equiv 0$ on $(p^{-1}(W)\cap V)H$, which is an open neighborhood of $g$. Hence $g\notin\supp(1_V)=V$ and $p(g)\notin p(V)=U$. Now if we define
$$
\psi(x)=\begin{cases}
\phi(p(x))/\Lambda(1_V)(p(x))&\textrm{ if }x\in V;\\
0&\textrm{otherwise},
\end{cases}
$$
we have $\Lambda(\psi)=\phi$ since if $x\in V$ and $h\in H$, then $p(xh)=p(x)\in p(V)=U$ and so
$$
\Lambda(\psi)(p(x))=\int_H\frac{\phi(p(xh))}{\Lambda(1_V)(p(xh))}dh=\frac{\phi(p(x))}{\Lambda(1_V)(p(x))}\vol(H)=\phi(p(x)).
$$
Note that $\psi$ is smooth, that is, locally constant.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $X$ and $Y$ be locally profinite spaces. Then $C_c^\infty(X)\otimes C_c^\infty(Y)\cong C_c^\infty(X\times Y)$ which maps $\phi_1\otimes\phi_2$ to the function $(x,y)\mapsto\phi_1(x)\phi_2(y)$.
</em></div>

<p class="proof"><em>Proof.</em> Denote $B_X$ and $B_Y$ the set of open compact subsets of $X$ and $Y$ respectively. Define complex linear maps
$$
\varphi:C_c^\infty(X)\otimes C_c^\infty(Y)\to C_c^\infty(X\times Y)
$$
by $\varphi(\phi_1\otimes\phi_2)(x,y)=\phi_1(x)\phi_2(y)$ and
$$
\psi:C_c^\infty(X\times Y)\to C_c^\infty(X)\otimes C_c^\infty(Y)
$$
by $\psi(1_{U\times V})=1_U\otimes 1_V$ if $U\in B_X$ and $V\in B_Y$. Since $\psi\circ\varphi(1_U\otimes 1_V)=\psi(1_{U\times V})=1_U\otimes 1_V$ for $U\in B_X$ and $V\in B_Y$, $\varphi$ is injective. To see that $\varphi$ is surjective, let $f\in C_c^\infty(X\times Y)$ and write $f=\sum_{k=1}^rc_i1_{U_i\times V_i}$ for some $c_i\in\mathbf{C}$ with $U_i\in B_X$ and $V_i\in B_Y$. Consider $U_1'=U_1$, $U_2'=U_2-U_1$, $U_3'=U_3-(U_1\cup U_2)$ and so on and similar for $V_i$, we may write $f$ as a finite sum
$$
f=\sum_{i,j=1}^rc_{ij}1_{U_i'\times V_j'}
$$
with $c_{ij}\in\mathbf{C}$, $\{U_i'\}$ pairwisely disjoint and so is $\{V_j'\}$. Hence, to prove the sujectiveness of $\varphi$, we may assume $f$ is of the form $1_{U\times V}$. Since $\varphi(1_U\otimes 1_V)=1_{U\times V}$, the result follows.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $\mathcal{F}$ be a sheaf of $X$ and $U$ an open subset of $X$. If $s$ a section of $\mathcal{F}$ over $U$, then the <em style="color: teal;">support</em> $\supp(s)$ of $s$ is the subset of $U$ defined by $\{x\in U\mid s(x)\neq 0\}$.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $s:U\to\hat{\mathcal{F}}$ be a section of a sheaf $\mathcal{F}$. Then the support of $s$ is closed.
</em></div>

<p class="proof"><em>Proof.</em> Denote $B$ a topological basis for $X$. Suppose that $x\notin\supp(s)$. By the definition of a section, $x$ has a neighborhood $W\in B$ such that $\left.s\right|_W\mathcal{F}(W)$. Since $t_x=s(x)=0$, there exists an open neighborhood $V\in B$ of $x$ such that $V\subseteq W$ and $t\equiv 0$ on $V$. Hence $s\equiv 0$ on $V$ and so $V$ does not intersect supp(s). This shows that the support of $s$ is closed.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script>
theorem("Proposition")
</script><em> Let $X$ be a locally profinite space and $\mathcal{F}$ a sheaf on $X$. Then there exists an abelian group $F_c$ and sheaf $\mathcal{F}'$ isomorphic to $\mathcal{F}$ such that for any open set $U$ of $X$, $\mathcal{F}'(U)\subseteq F_c$ and such that if $U\supseteq V$ are open sets, then $\mathcal{F}'(V)\subseteq\mathcal{F}'(U)$ and, if $f\in\mathcal{F}'(V)$, then the image of $f$ under the restriction map $\rho^U_V:\mathcal{F}'(U)\to\mathcal{F}'(V)$ is $f$ itself, whereas the image of $f$ under the restriction map $\rho^U_{U-V}:\mathcal{F}'\to\mathcal{F}'(U-V)$ is zero. Moreover, we may assume that $F_c$ is the union of the spaces $\mathcal{F}(U)$ with $U\in B$.
</em></div>

<p>
To clarify the meaning of this proposition, let us consider the special case of the sheaf $C^\infty:U\mapsto C^\infty(U)$ for $U$ open in $X$. If $U$ is a compact and open set of $X$, we embed $C^\infty(U)$ in $C^\infty(X)$ be extending a function in $C^\infty(U)$ y zero off $U$. Then it is clear that if $U\supseteq V$, then $C^\infty(V)\subseteq C^\infty(U)$, and that if $f\in C^\infty(V)$ is extended to $U$ and then restricted back to $V$, it is unchanged, but if extended to $U$ and then restricted to $U-V$, it is zero. The meaning of the proposition is that any sheaf on $X$ is isomorphic to a sheaf of this type. Of course, this type of topological space is very special, and usually one would not expect a sheaf to be realizable in this way.
</p>

<p class="proof"><em>Proof.</em> Because we may replace $\mathcal{F}$ by an isomorphic sheaf, we take $\mathcal{F}$ to be the sheaf of sections of an &eacute;tale space $\hat{\mathcal{F}}$. Let $\mathcal{F}_c$ be the space of all compactly supported sections in $\mathcal{F}(X)$. If $U\in B$, we embed $\mathcal{F}(U)$ in $\mathcal{F}_c$ by extending the section $s:U\to X$ by zero off $U$. Because $X-U$ is open, this is a section. All the assertions of the proposition are now easily checked.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $X$ be a locally profinite space. We call a $C_c^\infty(X)$-module or $C^\infty(X)$-module $M$ <em style="color: teal;">cosmooth</em> if for every $x\in M$, there exists an open compact subset $U$ of $X$ such that $1_U\cdot x=x$.
</div>

<p>
Actually, there is no difference between cosmooth modules for the two rings $C_c^\infty(X)$ and $C^\infty(X)$:
</p>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"CCICI"})
</script><em> Let $X$ be a locally profinite space and $M$ be a cosmooth $C_c^\infty(X)$-module. Then the action of $M$ may be extended in a unique way to make $M$ a $C^\infty(X)$-module.
</em></div>

<p class="proof"><em>Proof.</em> To extend the action of $C^\infty(X)$ on $M$ to $C^\infty(X)$, let $x\in M$. Let $U$ be an open compact set such that $x=1_U\cdot x$. Assuming the action can be extended, let $f\in C^\infty(X)$; we must have $f\cdot x=f\cdot(1_U\cdot x)=(f1_U)\cdot x$. Because $f1_U\in C_c^\infty(X)$, this shows that the extension of the action, if it exits, is unique. To show that the extension exists, we define $f\cdot x=(f1_U)\cdot x$ with $U$ defined as above; this defined is independent of the choice of $U$ since we can write $f=\sum_{i\in I}1_{U_i}$ with $\{U_i\}_{i\in I}$ pariwisely disjount and covering $X$ so that $U\subseteq\bigcup_{i=1}^rU_i$ for fintiely many $U_i$ by the compactness of $U$; if $V$ is another open compact subset of $X$ with $1_V\cdot x=x$, then similarly $V\subseteq\bigcup_{i=1}^{r'}U_i$ and we may assume $r'>r$; thus
$$
(f1_U)\cdot x=(\sum_{i=1}^r1_{U_i}1_U)\cdot x=(\sum_{i=1}^{r'}1_{U_i}1_U)\cdot x=\sum_{i=1}^{r'}1_{U_i}\cdot x=(\sum_{i=1}^{r'}1_{U_i}1_V)\cdot x=(f1_V)\cdot x.
$$
Now it is not hard to check that this definition makes $M$ a $C^\infty(X)$-module.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"CCIXS"})
</script><em> Let $X$ be a locally profinite space and $M$ a cosmooth $C_c^\infty(X)$-module. We associate a presheaf $\mathcal{M}$ with $M$ in the following way. Denote $B$ the open compact subset of $X$. If $U\in B$, let $\mathcal{M}(U)=1_U\cdot M$. If $U\supseteq V$ with $U$, $V\in B$, we define a restriction map $\rho^U_V:\mathcal{M}(U)\to\mathcal{M}(V)$ by $\rho^U_V(m)=1_V\cdot m$. Then $\mathcal{M}$ is a sheaf.
</em></div>

<p>
Thus we may associate a sheaf of modules over the ringed space $(X,C^\infty)$ with an arbitrary cosmooth module of $C_c^\infty(X)$.
</p>

<p class="proof"><em>Proof.</em> We note that because $1_U$ is an idempotent, we have
$$
\mathcal{M}(U)=\{m\in M\mid 1_U\cdot m=m\},
$$
a characterization that is easier to work with. The verification that $U\mapsto\mathcal{M}(U)$ is a presheaf follows simply from the fact that if $U\supseteq V$ are open sets, then $1_V1_U=1_V$. To verify that the presheaf $\mathcal{M}$ is a sheaf, we must verify the sheaf axiom. Thus assume that $\{U_i\mid i\in I\}$ is an open cover of $U\in B$ with $U_i\in B$ and with $m_i\in\mathcal{M}(U_i)$ such that $\rho^{U_i}_{U_i\cap U_j}(m_i)=\rho^{U_j}_{U_i\cap U_j}(m_i)$ for all $i$, $j$. We will show that there exists a unique element $m\in U$ such that $\rho^U_{U_i}(m)=m_i$. In fact, we will show that if $j$, $k\in I$, we may replace $U_j$ and $U_k$ by $U_0=U_j\cup U_k$. Specifically, we will show that there exists a unique element $m_0\in\mathcal{M}(U_j\cup U_k)$ such that $\rho^{U_0}_{U_j}(m_0)=m_j$ and $\rho^{U_0}_{U_k}(m_0)=m_k$. Furthermore, if $l\in I$, we will show that $\rho^{U_0}_{U_0\cap U_l}(m_0)=\rho^{U_l}_{U_0\cap U_l}(m_l)$. This means that we may successively replace pairs of sets in the cover $\{U_i\}$ by their unions. Because $U$ is compact, we will (in a finite number of steps) reach a state where $U$ itself is an element of the cover; at this point, the truth of the sheaf axiom beomces transparent.</p>
<p> Let $m_{j,k}=1_{U_j\cap U_k}\cdot m_j=1_{U_j\cap U_k}\cdot m_k$. Because $m_j=1_{U_j}\cdot m_j$, and because $1_{U_j}1_{U_k}=1_{U_j\cap U_k}$, we have $1_{U_k}\cdot m_j=m_{jk}$, and similarly $1_{U_j}\cdot m_k=m_{jk}$. Also $$1_{U_j}\cdot m_{jk}=1_{U_k}\cdot m_{jk}=1_{U_0}\cdot m_{jk}=1_{U_j\cap U_k}=m_{jk}.$$ Now let us define $m_0=m_j+m_k-m_{jk}$. Note that $1_{U_0}=1_{U_j}+1_{U_k}-1_{U_j\cap U_k}$ We have $1_{U_j}\cdot m_0=m_j,$ $1_{U_k}\cdot m_0=m_k$ and $1_{U_j\cap U_k}\cdot m_0=m_{jk}$. Hence $1_{U_0}\cdot m_0=m_0$ and $m_0\in\mathcal{M}(U_0)$ satisfy $\rho^{U_0}_{U_j}(m_0)=m_j$ and $\rho^{U_0}_{U_k}(m_0)=m_k$. As for uniqueness, if $\rho^{U_0}_{U_i}(m_0')=m_i$ for $i=j$, $k$, the note that $$m_0'=1_{U_0}\cdot m_0'=1_{U_j}\cdot m_0'+1_{U_k}\cdot m_0'-1_{U_j}1_{U_k}\cdot m_0'=m_j+m_k-m_{jk}=m_0.$$ The remaining assertion that $\rho^{U_0}_{U_0\cap U_l}(m_0)=\rho^{U_l}_{U_0\cap U_l}(m_l)$ may now be check as follows. Our assumption is that $1_{U_l}\cdot m_j=1_{U_j}\cdot m_l$ and that $1_{U_l}\cdot m_k=1_{U_k}\cdot m_l$. Furthermore, we have $$1_{U_l}\cdot m_{jk}=1_{U_l}1_{U_k}\cdot m_j=1_{U_j}1_{U_k}\cdot m_k=l=1_{U_j\cap U_k}\cdot m_l.$$ Therefore $1_{U_l}\cdot m_0=1_{U_l}\cdot(m_j+m_k-m_{jk})=(1_{U_j}+1_{U_k}-1_{U_j\cap U_k})\cdot m_l=1_{U_0}\cdot m_l,$ as desired. Thie completes the proof that $\mathcal{M}$ is a sheaf.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"MSIT"})
</script><em> Let $X$ be a locally profinite space, $M$ a cosmooth module over $C_c^\infty(X)$ and $\mathcal{M}$ the corresponding sheaf consatructed in <span style="font-style: normal;">(<script>ref("CCIXS");</script>)</span>. Then for any $\in X$, the stalk $\mathcal{M}_x$ is isomorphic to $M/M(x)$, where $M(x)$ is the submodule of all $m\in M$ such that $1_U\cdot m=0$ for some $U$ open in $X$ containing $x$; an equivalent condition is that $m=1_V\cdot m$ for some $V$ open in $X$ not containing $x$.
</em></div>

<div class="proof"><em>Proof.</em><p> If $U$ is open in $X$ containing $x$, let $\pi_U:M(U)\to M/M(x)$ be the composition of the inclusion $M(U)\to M$ with the projection $M\to M/M(x)$. We claim that if $U\supseteq V$ are open sets of $X$ containing $x$, then $\pi_V\circ\rho^U_v=\pi_U$. Indeed, if $m\in M(U)$, then $\pi_v\circ\rho^U_V(m)-\pi_U(m)$ is the image in $M/M(x)$ of $1_V\cdot m-m$. However, this element is in $M(x)$ because $1_v\cdot(1_V\cdot m-m)=0$. Now by the universal property of the direct limit, there exists a homomorphism $\sigma:\mathcal{M}_x\to M/M(x)$ such that $\sigma\circ\rho^U_x=\pi_U$ for any $x\in U$ with $U$ open in $X$. It is clear that $\sigma$ is surjective since $M$ is cosmooth,: since every $m\in M$ admits $U$ open in $X$ with $1_U\cdot m$, $m\in\mathcal{M}(U)$ and so $\sigma(\rho^U_x(m))$ mapsto the image of $x$ in $M/M(x)$. $\sigma$ is also injective since if $\sigma(\rho^U_x(m))=0$ for some $m\in M(U)$ with $U$ open in $X$, then $m\in M(x)$ and $1_V\cdot m=0$ for some $V$ open in $X$; thus $\rho^U_{U\cap V}(m)=0$ and $\rho^U_x(m)=0$.</p>
<p>
To see that $1_U\cdot m=0$ for some $U$ open in $X$ contaiing $x$ if and only if $1_V\cdot m=m$ for some $V$ open in $X$ not containing $x$, first let $U$ be given. Let $W$ be a sufficiently large open and compact set containing both $x$ and $U$ such that $1_W\cdot m=m$; such a set exsits because $M$ is cosmooth so that $1_Z\cdot m=m$ for some $Z$ open in $X$, and for any $W$ open in $X$ with $W\supseteq Z$, $1_W\cdot m=1_W\cdot (1_V\cdot m)=1_V\cdot m=m$, that is, we may replace $V$ by arbitrarily large $W$. In this situation, we may take $V=W-U$. Similarly if $V$ is given.
</p>
<span style="float:right;">$\square$</span></div>

<p>Now we may generalize the notion of a distribution.</p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $X$ be a locally profinite space and $\mathcal{F}$ a sheaf on $X$. Let $\mathcal{F}_c$ be the corresponding cosmooth module of compactly supported secitons. By an <em style="color: teal;">$\mathcal{F}$-distribution</em> on $X$, we mean a complex linear functional on the vector sapce $\mathcal{F}_c$. Let $D(X,\mathcal{F})$ denote the space of $\mathcal{F}$-distribution on $X$.
</div>

<p>
Suppose that $Z$ is closed in $X$ and $\mathcal{F}$ a sheaf on $X$. Denote $\mathcal{F}_Z$ the restriction of the sheaf $\mathcal{F}$ on $Z$. We have a map $\mathcal{F}_c\to(\mathcal{F}_Z)_c$; namely, if $s\in\mathcal{F}_c$ is compactly suppoerted section $U\to\hat{\mathcal{F}}$, its restriction $s:U\cap Z\to\hat{\mathcal{F}_Z}$ is a compatly supported section of $\mathcal{F}_Z$. Similarly, we have a map $(\mathcal{F}_{X-Z})_c\to\mathcal{F}_X$; namely, any compactly supported section of $\mathcal{F}_{X-Z}$ may be extended to $\mathcal{F}$ by making it zero on $Z$. Here is a generalization of (<script>ref("ESOD");</script>):
</p>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"ESODX"})
</script><em> Let $X$ be a locally profinite space and $\mathcal{F}$ a sheaf of $C^\infty(X)$-module. We have exact sequences</em>
<p hidden>
0\to(\mathcal{F}_{X-Z})_c\to\mathcal{F}_c\to(\mathcal{F}_Z)_c\to 0
</p><script>eq("DES1X")</script>
<em>and</em>
<p hidden>
0\to D(Z,\mathcal{F}_Z)\to D(X,\mathcal{F})\to D(X-Z,\mathcal{F}_{X-Z})\to 0.
</p><script>eq("DES2X")</script>
</div>

<p class="proof"><em>Proof.</em> The proof is identical to the proof of equations (<script>ref("DES1");</script>) and (<script>ref("DES1");</script>). Again, the only subtle part is the surjectivity of the restriciton $\mathcal{F}_c\to(\mathcal{F}_Z)_c$, and the proof is the same as (<script>ref("ESOD");</script>).
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $X$ be a topological space, $\mathcal{F}$ a sheaf on $X$ and $G$ a group acting on $X$. We say $G$ <em style="color: teal;">acts</em> on $\mathcal{F}$ if $g\cdot U$ is open in $X$ for every $g$ in $G$ and $U$ open in $X$. In this case, if $s\in\mathcal{F}(U)$ is a section over $U$ then $g\cdot s\in\mathcal{F}(g\cdot U)$ is a section over $gU$ defined by $g\cdot s(x)=s(g^{-1}\cdot x)$ for $x\in gU$.
</div>

<p>
If $G$ acts on $X$ and $\mathcal{F}$, then we denote $\mathcal{F}_c(\chi)$ the submodule of $\mathcal{F}_c$ generated by elements of the form $g\cdot f-\chi(g)^{-1}f$ for $f\in\mathcal{F}_c$ and $g\in G$.
</p>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $X$ and $Y$ be locally profinite sapces, $p:X\to Y$ a continuous map, $\mathcal{F}$ a sheaf on $X$, $G$ a group acting on btoh $X$ and $\mathcal{F}$, and $\chi$ a character of $G$.</em>
<ol class="parenthesis" style="font-style: italic;">
    <li>Let $y\in Y$, $Z=p^{-1}(y)$. Then $M:=\mathcal{F}_c/\mathcal{F}_c(\chi)$ is a cosmooth $C^\infty(Y)$-module; let $\mathcal{G}$ be the corresponding sheaf on $Y$ constructed by <span style="font-style: normal;">(<script>ref("CCIXS");</script>)</span>. If $y\in Y$, then the stalk $\mathcal{G}_y$ is isomorphic to $(\mathcal{F}_Z)_c/(\mathcal{F}_Z)_c(\chi)$.</li>
    <li> Assume that there are no non-zero distribution $D$ in $D(Z,\mathcal{F}_Z)$ that satisfy
    <p hidden>
    gD=\chi(g)D,\quad g\in G,
    </p><script>eq("GDXD")</script>
     for any $Z=p^{-1}(y)$ and any $y\in Y$. Then there are no non-zero distributions in $D(X,\mathcal{F})$ satisfying <span style="font-style: normal;">(<script>ref("GDXD");</script>)</span>.
    </li>
</ol>
</div>

<div class="proof"><em>Proof.</em><p> We first prove (i). $M$ is a $C^\infty(X)$-module naturally. The $C^\infty(Y)$-module structure on $M$ is defined via the pullback of $p:X\to Y$, that is, $$h\cdot_Y m:=(h\circ p)\cdot m.$$ By (<script>ref("ESODX");</script>), the canonical homomorphism $\mathcal{F}_c\to(\mathcal{F}_Z)_c$ is surjective. We show that its kernel consists of the submodule $L$ generated by elements of the form $(\phi\circ p)\cdot f$, where $\phi\in C_c^\infty(Y)$ vanishes at $y$, and $f\in\mathcal{F}_c$. It is clear that $L$ is contained in this kernel. Conversely, let $f\in\mathcal{F}_c$ be in the kernel. Then $\supp(f)$ is compact and disjoint from $Z$, so its image under $p$ is a compact subset of $Y$ that does not contain $y$. Hence there is an open and compact subset of $Y$ containing $p(\supp(f))$ but not $y$. If $\phi$ is the characteristic function of this set, then $f=(\phi\circ p)\cdot f$, showing that $f\in L$.</p>
<p> Because $(\mathcal{F}_Z)_c\cong\mathcal{F}_c/L$, we see that</p>
<p hidden>
(\mathcal{F}_Z)_c/(\mathcal{F}_Z)_c(\chi)\cong(\mathcal{F}_c/L)/(\mathcal{F}_c/L)(\chi)=(\mathcal{F}_c/L)/(\mathcal{F}_c(\chi)L/L)\cong\mathcal{F}_c/\mathcal{F}_c(\chi)L
</p><script>eq("FCFCFC")</script><p>
which is isomorphic to $(\mathcal{F}_c/\mathcal{F}_c(\chi))/(\mathcal{F}_c(\chi)L/\mathcal{F}_c(\chi))$. Hence the canonical surjective homomorphism $\mathcal{F}_c/\mathcal{F}_c(\chi)\to(\mathcal{F}_Z)_c/(\mathcal{F}_Z)_c(\chi)$ has kernel $L\mathcal{F}_c(\chi)/\mathcal{F}_c(\chi)$, which is the submodule of $M$ generated by elements of the form $(\phi\circ p)\cdot\overline{f}$, where $\phi\in C_c^\infty(Y)$ vanishes at $y$, and $f\in\mathcal{F}_c/\mathcal{F}_c(\chi)=M$.
On the other hand, by (<script>ref("MSIT");</script>),
$$
\mathcal{G}_y\cong M/M(y)=(\mathcal{F}_c/\mathcal{F}_c(\chi))/(\mathcal{F}_c/\mathcal{F}_c(\chi))(y)
$$
where for any $\overline{s}\in M(y)$, there exists $V$ open in $Y$ not containing $y$ such that $1_V\cdot_Y\overline{s}=\overline{s}$, that is, $(1_V\circ p)\cdot\overline{s}=\overline{s}$; set $\phi=1_V$ to see that $\overline{s}$ lies in $L\mathcal{F}_c(\chi)/\mathcal{F}_c(\chi)$. Conversely, for any element $\overline{f}$ in the kernel $L\mathcal{F}_c(\chi)/\mathcal{F}_c(\chi)$, we can choose a representative $f\in\mathcal{F}_c$ of $\overline{f}$ so that by the first paragraph, there exists an open compact subset $V$ of $Y$ containing $p(\supp(f))$ but not $y$; whence $(1_{V}\circ p)\cdot\overline{f}=\overline{(1_{V}\circ p)\cdot f}=\overline{f}$ and $\overline{f}\in M(y)$. Therefore $M(y)=L\mathcal{F}_c(\chi)/\mathcal{F}_c(\chi)$ and by (<script>ref("FCFCFC");</script>),
$$
\mathcal{G}_y\cong M/M(y)\cong(\mathcal{F}_c/\mathcal{F}_c(\chi))/(L\mathcal{F}_c(\chi)/\mathcal{F}_c(\chi))\cong\mathcal{F}_c/L\mathcal{F}_c(\chi)\cong (\mathcal{F}_Z)_c/(\mathcal{F}_Z)_c(\chi),
$$
which proves (i). We note that (ii) is an immediate consequence of (i). Indeed, the action of $g$ on $\mathcal{F}$-distribution has the effect $(gD)(f)=D(g^{-1}f)$, so $D\in D(X,\mathcal{F})$ satisfies (<script>ref("GDXD");</script>) if and only if $D(g^{-1}f)=D(\chi(g)f)$ for any $g\in G$ and $f\in\mathcal{F}_c$, that is $D$ annihilates $\mathcal{F}_c(\chi)$. Hence it sufficient to show $M=0$, or equivalently, that $\mathcal{G}$ is the zero sheaf, and this will follow if each stalk $\mathcal{G}_y$ is zero. Because $\mathcal{G}_y\cong(\mathcal{F}_Z)_c/(\mathcal{F}_Z)_c(\chi)$, the assumption that there are no non-zero $\mathcal{F}_Z$-distribution in $D(Z,\mathcal{F}_Z)$ is precisely the condition that this stalk be zero.</p>
<span style="float:right;">$\square$</span></div>

</div>

<script>
    section("section","Smooth and Admissible Representation")
</script>
<div class="collapse" id="content-smooth-and-admissible-representation">

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $G$ be a locally profinite group and $(\pi,V)$ a group representation of $G$. The representation $(\pi,V)$ is called <em style="color: teal;">smooth</em> if, for every $v\in V$, the stabilizer $\{g\in G\mid\pi(g)v=v\}$ is open. A smooth representation $(\pi,V)$ is called <em style="color: teal;">admissible</em> if the space $V^K$ is finite-dimensional for each open subgroup $U$ of $G$.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"ECSR"})
</script><em> Let $G$ be a locally profinite group and $(\pi,G)$ a representation of $G$. Then $\pi$ is smooth if and only if for each $v\in V$, therer exists a compact open subgroup $K$ of $G$ such that $\pi(K)$ fixes $v$.
</em></div>

<p class="proof"><em>Proof.</em> Let $v\in V$. If therer exists a compact open subgroup $K$ of $G$ such that $\pi(K)$ fixes $v$, then for any $g$ fixes $v$, $gK$ will fixes $v$ as well; hence $gK$ is an open neighborhood of $g$ contained in $\{g\in G\mid\pi(g)v=v\}$. The converse is clearly.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $G$ be a locally profinite group and $(\rho,GL_n(\mathbf{C}))$ a smooth representation of $G$. Then the kernel of $\rho$ is open if and only if $\rho$ is continuous.
</em></div>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $G$ be a locally profinite group. Denote $[G]$ the set of equivalence class of irreducible representation of $G$ whose kernel is open.
</div>

<p>
Recall that if $\Gamma$ is a finite group, then for any representation $(\pi,V)$ of $G$,</p>
<p hidden>
V=\bigoplus_{\rho\in[\Gamma]}V(\rho)
</p><script>eq("SSFGR")</script>
<p>where $V(\rho)$ is the sum of all invariant subspaces of $V$ that are isomorphic as $\Gamma$-modules to $(\rho,V_\rho)$. We will generalize the decomposition (<script>ref("SSFGR");</script>) to smooth representations of a locally profinite group $G$.
</p>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"SSPGT"})
</script><em> Let $(\pi,V)$ be a smooth representation of $G$ and $K$ an open compact subgroup of $G$. Then</em>
<p hidden>
V=\bigoplus_{\rho\in[K]}V(\rho)
</p><script>eq("SSPGR")</script>
<em>as vector space direct sum. The representation $\pi$ is admissible if and only if each of the $V(\rho)$ is finite dimensional.
</em></div>

<p class="proof"><em>Proof.</em> We show first that $V$ is the sum of the spaces $V(\rho)$. Indeed, if $v\in V$, then because $\pi$ is smooth, $v$ is fixed by some compact open subgroup $K_0$ of $K$, which by (<script>ref("COCF");</script>) and (<script>ref("OFON");</script>) may be chosen to be normal. Note that a representation $\rho$ of $K$ will fix $K_0$ if and only if $\rho$ is a representation of $K/K_0$. Then by (<script>ref("SSFGR");</script>) with the finite group $\Gamma=K/K_0$,
$$
v\in V^{K_0}=\bigoplus_{\rho\in[\Gamma]}V(\rho)\subseteq\sum_{\rho\in[K]}V(\rho)
$$
Thus $V$ is the sum of the sapces  $V(\rho)$. We now show that the sum is direct. Suppose it is not. Then there is a relation $\sum_{\rho\in S}c_\rho v_\rho=0$, where $S$ is a finite subset of $[K]$, $v_\rho\in V(\rho)$ and the constants $c_\rho$ are not all zero. Let $K_1$ be the intersection of the kernels of the $\rho$ that appear in this relation, which is an open compact normal subgroup of $G$. We obtain a contradiction to the directness of the sum (<script>ref("SSFGR");</script>) with $\Gamma=K/K_1$.</p>
<p> Suppose now that $\pi$ is admissible. To see that $V(\rho)$ is finite dimensional, note that $V(\rho)$ is ontained in the space $V^{\Ker(\rho)}$ of vectors fixed by the kernel of $\rho$; because $\Ker(\rho)$ is open, this space is finite dimensional by the definition of admissibility. On the other hand, if $\pi$ is not admissible, then $V^{K_2}$ is infinite dimensional for some open normal subgroup $K_2$ of $K$. But $V^{K_2}$ decomposes into the finite direct sum of $V(\rho)$ with $\rho\in[K/K_2]$; because $[K/K_2]$ is finite, one of these spaces must be infinite dimensional.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $(\pi,V)$ be a smooth representation of $G$ and $K$ an open compact subgroup of $G$. Let $V_K$ denote the subspace of $V$ consists of elements of the form $v-\pi(k)v$ with $v\in V$ and $k\in K$.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $(\pi,V)$ be a smooth representation of $G$ and $K$ an open compact subgroup of $G$. Then $V=V^K\oplus V_K$.
</em></div>

<p class="proof"><em>Proof.</em> By (<script>ref("SSPGR");</script>),
$$
V=\bigoplus_{\rho\in[K]}V(\rho)=V(1)\oplus\bigoplus_{1\neq\rho\in[K]}V(\rho)=V^K\oplus\bigoplus_{1\neq\rho\in[K]}V(\rho).
$$
Let $W=\bigoplus_{1\neq\rho\in[K]}V(\rho)$. It suffices to show that $V_K=W$. Consider the $K$-projection $p:V\to V^K$ with kernel $W$. Then for any $k\in K$,
$$
p(v-\pi(k)v)=p(v)-p(\pi(k)v)=p(v)-\pi(p(v))=p(v)-p(v)=0.
$$
Hence $V_K\subseteq W$. Conversely, for any $1\neq\rho\in[K]$, there exist $v\in V(\rho)$ with $\pi(k)v\neq v$. Thus $V(\rho)_K$ is non-zero, and $V(\rho)_K=V(\rho)$ by the irreducibility of $V(\rho)$. Hence $V(\rho)=V(\rho)_K\subseteq V_K$ and $W\subseteq V_K$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> Let $G$ be a locally profinite group and $(\pi,V)$ a smooth representation of $G$. If $\hat{v}:V\to\mathbf{C}$ is a linear functional, we write $\langle v,\hat{v}\rangle$ for $\hat{v}(v)$ when $v\in V$. We say $\hat{v}$ is <em style="color: teal;">smooth</em> if there exists an open neighborhood $U$ of the identity of $G$ such that $\langle\pi(g)v,\hat{v}\rangle=\langle v,\hat{v}\rangle$ whenever $g\in U$, $v\in V$. Let $\hat{V}$ be the vector subspace of smooth linear functionals on $V$. We define a representation $(\hat{\pi},\hat{V})$, called the <em style="color: teal;">contragredient representation</em> by letting $g$ act on $\hat{V}$ by $\langle v,\hat{\pi}(g)\hat{v}\rangle=\langle\pi(g^{-1})v,\hat{v}\rangle$.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $G$ be a locally profinite group and $(\pi,V)$ a smooth representation of $G$. Then $(\hat{\pi},\hat{V})$ is a smooth representation of $G$ as well.
</em></div>

<p class="proof"><em>Proof.</em> Let $\hat{v}\in\hat{V}$. By definition, there exists an open neighborhood $U$ of the identity of $G$ fixing $v$. By the locally profiniteness, $U$ can chosen to be compact. Now apply (<script>ref("ECSR");</script>).
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"SLFC"})
</script><em> Let $G$ be a locally profinite group, $(\pi,V)$ a smooth representation of $G$ and $\hat{v}$ a linear functional on $V$ and consider a decomposition
$$
V=\bigoplus_{\rho\in[K]}V(\rho)
$$
induced by any compact open subgroup $K$ of $G$. Then $\hat{v}$ is smooth if and only if $\hat{v}$ acts identically zero on all but finitely many $V(\rho)$, $\rho\in[K]$.
</em></div>

<p class="proof"><em>Proof.</em> If $\hat{v}$ is smooth, then there exists some open compact subgroup $K'$ of $G$ fixing $\hat{v}$. We first assume $K'=K$ so that $\hat{\pi(k)v}=\hat{v}(v)$ for any $k\in K$ and $v\in $. Then $\hat{v}$ acts identically zero on $V_K$ since
$$
\hat{v}(v-\pi(k)v)=\hat{v}(v)-\hat{v}(\pi(k)v)=\hat{v}(v)-\hat{v}(v)=0
$$
for any $k\in K$ and $v\in K$, as desired. For the general case, we may assume $K'\subseteq K$ so that $\hat{v}$ acts identically zero on $V_{K'}$. We need to show that $V^{K'}$ contains only finitely many components $V(\rho)$ with $\rho\in[K]$. Since $K/K'$ acts on $V^{K'}$, we have
$$
V^{K'}=\bigoplus_{\rho\in[K/K']}V(\rho)\subseteq\bigoplus_{\rho\in[K]}V(\rho).
$$
Since $K/K'$ is finite, $[K/K']$ is finite as well, which proves the only if part. Now assume that $\hat{v}$ acts identically zero on all but finitely many $V(\rho)$, $\rho\in[K]$, say $\rho_1,\ldots,\rho_r$. For each $i$, there exists $v_i\in V(\rho_i)$ with $\hat{v}(v_i)\neq 0$. Since $\pi$ acts smoothely on $V$, three exists open compact subgroup $K_i$ of $G$ fixing $v_i$. Denote $\hat{v}_i$ the restriction of $\hat{v}$ on $V(\rho_i)$. Then $\hat{v}_i:V(\rho_i)\to\mathbf{C}$ is surjective, and we can write $V(\rho_i)=\span\{v_i\}\oplus\Ker(\hat{v}_i)$. Thus for any $x\in V(\rho_i)$, $\hat{v}(kx)=\hat{v}(x)$ for any $k\in K_i$. Let $K'$ be the intersection of $K_1,\ldots,K_r$. Then $\hat{v}(kx)=\hat{v}(x)$ for any $k\in K'$ and $x\in\oplus_{i=1}^rV(\rho_i)$ and so any $x\in V$, that is, $\hat{v}$ is fixed by $K'$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition",{"label":"CGDT"})
</script><em> Let $G$ be a locally profinite group, $(\pi,V)$ a smooth representation of $G$ and $K$ a compact open subgroup of $G$ so that
$$
V=\bigoplus_{\rho\in[K]}V(\rho).
$$
Then
$$
\hat{V}=\bigoplus_{\rho\in[K]}V(\rho)^\ast
$$
where $V(\rho)^\ast$ is the dual space of $V(\rho)$.
</em></div>

<p class="proof"><em>Proof.</em> The dual space of an infinite direct sum of vector spaces is the direct product of the dual space. Thus
$$
\hat{V}\subseteq V^\ast=\prod_{\rho\in[K]} V(\rho)^\ast.
$$
By (<script>ref("SLFC");</script>), a linear functional on $V$ is smooth if and only if it is zero on all but finitely many of the summand $V(\rho)$, $\rho\in[K]$. Therefore $\hat{V}$ may be identified with the direct sum of the $V(\rho)^\ast$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Corollary")
</script><em> Let $G$ be a locally profinite group, $(\pi,V)$ a smooth representation of $G$. Then $\pi$ is admissible if and only if $\hat{\pi}$ is admissible. In this case, $\hat{\pi}\cong\pi$.
</em></div>

<p class="proof"><em>Proof.</em> Use (<script>ref("SSPGT");</script>), (<script>ref("CGDT");</script>) and the fact that the dual space of th finite-dimensional vector sapce is again finite dimensional and that a finite dimensional vector sapce is isomorphic to its double dual.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-warning">
<script >
theorem("Definition")
</script> If $G$ is a unimodular locally profinite group. Denote $H_G$ the space of smooth (that is, locally constant) compactly supported complex-valued functions on $G$ equipped with the convolution $\ast$ on $H_G$. The algerba $(H_G,\ast)$ is called the <em style="color: teal;">Hecke algebra</em>. $G$ acts on $H_G$ by $(\lambda(g)f(x)=f(g^{-1}x)$ and $(\rho(g)f)(x)=f(xg)$. If $K$ is an open comapct subgroup of $H$ then denote $H^K$ the subspace of $K$-biinvariant functions in $H$.
</div>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $G$ be a unimodular locally profinite group and $K$ an open compact subgroup of $G$. Then $H^K$ is a unital algebra.
</em></div>

<p class="proof"><em>Proof.</em> This follows from the following proposition
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition") 
</script><em> Let $G$ be a unimodular locally profinite group and $U$ a compact open subgroup of $G$. Then $e_K\in H^K$ defined by $$e_K(g)=\frac{1_K}{\vol(K)}$$ is an idempotent. In fact, it is the unit in $G^K$.
</em></div>

<p class="proof"><em>Proof.</em> Fix $g\in G$ and consider the integral
$$
e_K\ast e_K(g)=\int_Ge_K(x)e_K(x^{-1}g)dx=\vol(K)\sum_{x\in G/K}e_K(x)e_K(x^{-1}g)dx
$$
where the second follows fact that $e_K$ is right invariant under $K$. If $g\in K$ then
$$
\vol(K)\sum_{x\in G/K}e_K(x)e_K(x^{-1}g)dx=\vol(K)e_K(e)e_K(eg)=\frac{1}{\vol(K)}
$$
and if $g\notin K$ then
$$
\vol(K)\sum_{x\in G/K}e_K(x)e_K(x^{-1}g)dx=\vol(K)\cdot 0=0.
$$
If $f$ is right $K$-invariant then for any $g\in G$,
$$
e_K\ast f(g)=\int_Ge_K(x)f(x^{-1}g)dx=\vol(K)\sum_{x\in G/K}e_K(e)f(e^{-1}g)=f(g).
$$
Similarly, if $f$ is left $K$-invariant then for any $g\in G$,
$$
f\ast e_K(g)=\int_Gf(x)e_K(x^{-1}g)dx=\vol(K)\sum_{x\in K/G}f(g)e_K(g^{-1}g)=f(g).
$$
Hence $e_K$ is the unit in $H^K$.
<span style="float:right;">$\square$</span></p>

<div class="alert alert-info">
<script >
theorem("Proposition")
</script><em> Let $G$ be a unimodular locally profinite group. Then there is an equivalence of category between the category of smooth representations $(\pi,V)$ of $G$ and the category of smooth $H_G$-algebra.
</em></div>

<p class="proof"><em>Proof.</em>
<span style="float:right;">$\square$</span></p>

</div>
</div>
</div>
<!-- Write above -->
</div>

<!-- TOC -->

<script>
    document.getElementById("toc-only").innerHTML = generateTOC("page");
</script>

<!-- TOC -->

<!-- Show section-->

<script>
    $(document).ready(function(){
            $("#content-classes").collapse("show");
    });
</script>

<!-- Show section-->

<!-- popup -->
<div class="ui-toc dropup unselectable hidden-print" style="display:none;">
    <div class="pull-right dropdown">
        <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
        <i class="fa fa-bars"></i>
        </a>
        <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
            <li class="toc">
                <ul class="nav">
                    <script>
                        generateTOC();    
                    </script>
                </ul>
            </li>
            <li class="toc-menu"><a class="expand-toggle" href="#">全部展開</a><a class="back-to-top" href="#">回到頂部</a><a class="go-to-bottom" href="#">移至底部</a></li>
        </ul>
    </div>
</div>
<!-- Content right -->
<div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;">
    <div class="toc">
        <ul class="nav">
            <script>
                generateTOC();    
            </script>
        </ul>
    </div>
    <div class="toc-menu"><a class="expand-toggle" href="#">全部展開</a><a class="back-to-top" href="#">回到頂部</a><a class="go-to-bottom" href="#">移至底部</a></div>
</div>
<!--
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
<script>
    var markdown = $(".markdown-body");
    //smooth all hash trigger scrolling
    function smoothHashScroll() {
        var hashElements = $("a[href^='#']").toArray();
        for (var i = 0; i < hashElements.length; i++) {
            var element = hashElements[i];
            var $element = $(element);
            var hash = element.hash;
            if (hash) {
                $element.on('click', function(e) {
                    // store hash
                    var hash = this.hash;
                    if ($(hash).length <= 0) return;
                    // prevent default anchor click behavior
                    e.preventDefault();
                    // animate
                    $('body, html').stop(true, true).animate({
                        scrollTop: $(hash).offset().top
                    }, 100, "linear", function() {
                        // when done, add hash to url
                        // (default click behaviour)
                        window.location.hash = hash;
                    });
                });
            }
        }
    }

    smoothHashScroll();
    var toc = $('.ui-toc');
    var tocAffix = $('.ui-affix-toc');
    var tocDropdown = $('.ui-toc-dropdown');
    //toc
    tocDropdown.click(function(e) {
        e.stopPropagation();
    });

    var enoughForAffixToc = true;

    function generateScrollspy() {
        $(document.body).scrollspy({
            target: ''
        });
        $(document.body).scrollspy('refresh');
        if (enoughForAffixToc) {
            toc.hide();
            tocAffix.show();
        } else {
            tocAffix.hide();
            toc.show();
        }
        $(document.body).scroll();
    }

    function windowResize() {
        //toc right
        var paddingRight = parseFloat(markdown.css('padding-right'));
        var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
        toc.css('right', right + 'px');
        //affix toc left
        var newbool;
        var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
        //for ipad or wider device
        if (rightMargin >= 133) {
            newbool = true;
            var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
            var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
            tocAffix.css('left', left + 'px');
        } else {
            newbool = false;
        }
        if (newbool != enoughForAffixToc) {
            enoughForAffixToc = newbool;
            generateScrollspy();
        }
    }
    $(window).resize(function() {
        windowResize();
    });
    $(document).ready(function() {
        windowResize();
        generateScrollspy();
    });

    //remove hash
    function removeHash() {
        window.location.hash = '';
    }

    var backtotop = $('.back-to-top');
    var gotobottom = $('.go-to-bottom');

    backtotop.click(function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (scrollToTop)
            scrollToTop();
        removeHash();
    });
    gotobottom.click(function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (scrollToBottom)
            scrollToBottom();
        removeHash();
    });

    var toggle = $('.expand-toggle');
    var tocExpand = false;

    checkExpandToggle();
    toggle.click(function(e) {
        e.preventDefault();
        e.stopPropagation();
        tocExpand = !tocExpand;
        checkExpandToggle();
    })

    function checkExpandToggle() {
        var toc = $('.ui-toc-dropdown .toc');
        var toggle = $('.expand-toggle');
        if (!tocExpand) {
            toc.removeClass('expand');
            toggle.text('全部展開');
        } else {
            toc.addClass('expand');
            toggle.text('全部收起');
        }
    }

    function scrollToTop() {
        $('body, html').stop(true, true).animate({
            scrollTop: 0
        }, 100, "linear");
    }

    function scrollToBottom() {
        $('body, html').stop(true, true).animate({
            scrollTop: $(document.body)[0].scrollHeight
        }, 100, "linear");
    }
</script>
</body>
</html>